<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基本概念介绍 | 流程引擎原理与实践</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?925c3dadc75643902ba1d4bef48fa406";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script></script>
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="国内首本从工程角度系统性介绍流程引擎的技术体系">
    <meta name="baidu-site-verification" content="codeva-c7FETTq8fo">
    <meta name="keywords" content="开源电子书，工作流技术体系，流程引擎技术体系，工作流，流程引擎，事件驱动机制，权限系统设计，云原生工作流，Crontab工作流，工作流系统架构，流程建模，DAG，FSM，WFMC，BPMN，BPM，Airflow，OsWorkflow，Petri">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.b8820ad2.js" as="script"><link rel="preload" href="/assets/js/2.a6c4a04f.js" as="script"><link rel="preload" href="/assets/js/1.04b49174.js" as="script"><link rel="preload" href="/assets/js/18.5e539e58.js" as="script"><link rel="prefetch" href="/assets/js/10.01c85a43.js"><link rel="prefetch" href="/assets/js/11.36ba8367.js"><link rel="prefetch" href="/assets/js/12.49270403.js"><link rel="prefetch" href="/assets/js/13.9964bf6f.js"><link rel="prefetch" href="/assets/js/14.1ffdb2cc.js"><link rel="prefetch" href="/assets/js/15.3ec6e020.js"><link rel="prefetch" href="/assets/js/16.223f06e4.js"><link rel="prefetch" href="/assets/js/17.49a0611a.js"><link rel="prefetch" href="/assets/js/19.08beb14f.js"><link rel="prefetch" href="/assets/js/20.2fd50ddb.js"><link rel="prefetch" href="/assets/js/21.94815126.js"><link rel="prefetch" href="/assets/js/22.7335372f.js"><link rel="prefetch" href="/assets/js/23.efd43c2e.js"><link rel="prefetch" href="/assets/js/24.33511251.js"><link rel="prefetch" href="/assets/js/25.9103752e.js"><link rel="prefetch" href="/assets/js/26.be3c6fce.js"><link rel="prefetch" href="/assets/js/27.a66d9ab9.js"><link rel="prefetch" href="/assets/js/28.db24d1a7.js"><link rel="prefetch" href="/assets/js/29.e639cc41.js"><link rel="prefetch" href="/assets/js/3.8ee85a39.js"><link rel="prefetch" href="/assets/js/30.9f96cad1.js"><link rel="prefetch" href="/assets/js/31.76245b5d.js"><link rel="prefetch" href="/assets/js/32.01a0bbd7.js"><link rel="prefetch" href="/assets/js/33.6cb05ad6.js"><link rel="prefetch" href="/assets/js/34.370a24a6.js"><link rel="prefetch" href="/assets/js/35.83692dfe.js"><link rel="prefetch" href="/assets/js/36.c783d15a.js"><link rel="prefetch" href="/assets/js/37.ac210fe0.js"><link rel="prefetch" href="/assets/js/38.07dc64eb.js"><link rel="prefetch" href="/assets/js/39.4ef28dca.js"><link rel="prefetch" href="/assets/js/4.9d17ba4d.js"><link rel="prefetch" href="/assets/js/40.a8fcb556.js"><link rel="prefetch" href="/assets/js/41.98d7d1f0.js"><link rel="prefetch" href="/assets/js/42.e31dd182.js"><link rel="prefetch" href="/assets/js/43.822702b0.js"><link rel="prefetch" href="/assets/js/44.50c68594.js"><link rel="prefetch" href="/assets/js/45.4e32699e.js"><link rel="prefetch" href="/assets/js/46.09f04e77.js"><link rel="prefetch" href="/assets/js/47.35c13096.js"><link rel="prefetch" href="/assets/js/48.99dfb60f.js"><link rel="prefetch" href="/assets/js/49.e1984c48.js"><link rel="prefetch" href="/assets/js/5.5682b71e.js"><link rel="prefetch" href="/assets/js/50.4242e15e.js"><link rel="prefetch" href="/assets/js/51.bdee7514.js"><link rel="prefetch" href="/assets/js/52.3b23c6f4.js"><link rel="prefetch" href="/assets/js/53.b6798440.js"><link rel="prefetch" href="/assets/js/54.ac356f09.js"><link rel="prefetch" href="/assets/js/55.79840f1c.js"><link rel="prefetch" href="/assets/js/56.343306c2.js"><link rel="prefetch" href="/assets/js/57.90f7511a.js"><link rel="prefetch" href="/assets/js/58.59457ff7.js"><link rel="prefetch" href="/assets/js/59.a05e2b0c.js"><link rel="prefetch" href="/assets/js/6.6aa986f5.js"><link rel="prefetch" href="/assets/js/60.7d6e698d.js"><link rel="prefetch" href="/assets/js/61.d1952570.js"><link rel="prefetch" href="/assets/js/62.a15b1cb5.js"><link rel="prefetch" href="/assets/js/63.69030ee5.js"><link rel="prefetch" href="/assets/js/64.a60b63a8.js"><link rel="prefetch" href="/assets/js/65.c1986cb9.js"><link rel="prefetch" href="/assets/js/66.e5747c76.js"><link rel="prefetch" href="/assets/js/67.c7de5e6a.js"><link rel="prefetch" href="/assets/js/68.96f4e3c6.js"><link rel="prefetch" href="/assets/js/69.db66370e.js"><link rel="prefetch" href="/assets/js/7.1fb8aaeb.js"><link rel="prefetch" href="/assets/js/70.8962d544.js"><link rel="prefetch" href="/assets/js/71.695bacdf.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.7bd035a8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="流程引擎原理与实践" class="logo"> <span class="site-name can-hide">流程引擎原理与实践</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-引言.html" class="nav-link">
  1 引言
</a></li><li class="dropdown-item"><!----> <a href="/2-概念.html" class="nav-link">
  2 概念
</a></li><li class="dropdown-item"><!----> <a href="/3-流程建模和解析.html" class="nav-link">
  3 流程建模和解析
</a></li><li class="dropdown-item"><!----> <a href="/4-流程引擎的核心组件.html" class="nav-link">
  4 流程引擎的核心组件
</a></li><li class="dropdown-item"><!----> <a href="/5-事件驱动机制.html" class="nav-link">
  5 事件驱动机制
</a></li><li class="dropdown-item"><!----> <a href="/6-核心表结构与接口设计.html" class="nav-link">
  6 核心表结构与接口设计
</a></li><li class="dropdown-item"><!----> <a href="/7-权限系统设计.html" class="nav-link">
  7 权限系统设计
</a></li><li class="dropdown-item"><!----> <a href="/8-分布式Crontab任务调度.html" class="nav-link">
  8 分布式Crontab任务调度
</a></li><li class="dropdown-item"><!----> <a href="/9-流程分析.html" class="nav-link">
  9 流程分析
</a></li><li class="dropdown-item"><!----> <a href="/10-云原生工作流.html" class="nav-link">
  10 云原生工作流
</a></li><li class="dropdown-item"><!----> <a href="/11-多引擎分布式系统实现.html" class="nav-link">
  11 多引擎分布式系统实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="帮助" class="dropdown-title"><span class="title">帮助</span> <span class="arrow down"></span></button> <button type="button" aria-label="帮助" class="mobile-dropdown-title"><span class="title">帮助</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about.html" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="/sponsor.html" class="nav-link">
  打赏赞助
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/guanchao/workflow-engine-book" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-引言.html" class="nav-link">
  1 引言
</a></li><li class="dropdown-item"><!----> <a href="/2-概念.html" class="nav-link">
  2 概念
</a></li><li class="dropdown-item"><!----> <a href="/3-流程建模和解析.html" class="nav-link">
  3 流程建模和解析
</a></li><li class="dropdown-item"><!----> <a href="/4-流程引擎的核心组件.html" class="nav-link">
  4 流程引擎的核心组件
</a></li><li class="dropdown-item"><!----> <a href="/5-事件驱动机制.html" class="nav-link">
  5 事件驱动机制
</a></li><li class="dropdown-item"><!----> <a href="/6-核心表结构与接口设计.html" class="nav-link">
  6 核心表结构与接口设计
</a></li><li class="dropdown-item"><!----> <a href="/7-权限系统设计.html" class="nav-link">
  7 权限系统设计
</a></li><li class="dropdown-item"><!----> <a href="/8-分布式Crontab任务调度.html" class="nav-link">
  8 分布式Crontab任务调度
</a></li><li class="dropdown-item"><!----> <a href="/9-流程分析.html" class="nav-link">
  9 流程分析
</a></li><li class="dropdown-item"><!----> <a href="/10-云原生工作流.html" class="nav-link">
  10 云原生工作流
</a></li><li class="dropdown-item"><!----> <a href="/11-多引擎分布式系统实现.html" class="nav-link">
  11 多引擎分布式系统实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="帮助" class="dropdown-title"><span class="title">帮助</span> <span class="arrow down"></span></button> <button type="button" aria-label="帮助" class="mobile-dropdown-title"><span class="title">帮助</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about.html" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="/sponsor.html" class="nav-link">
  打赏赞助
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/guanchao/workflow-engine-book" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第一部份：流程引擎基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>第二部份：流程引擎实现</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>4 流程引擎的核心组件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/4.1-WFMC工作流参考模型.html" class="sidebar-link">4.1 WFMC工作流参考模型</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>4.2 任务调度机制</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/4.2.1-DAG调度算法原理与实践.html" class="active sidebar-link">4.2.1 DAG调度算法原理与实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.2.1-DAG调度算法原理与实践.html#基本概念介绍" class="sidebar-link">基本概念介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.2.1-DAG调度算法原理与实践.html#拓扑排序" class="sidebar-link">拓扑排序</a></li><li class="sidebar-sub-header"><a href="/4.2.1-DAG调度算法原理与实践.html#广度优先算法-bfs" class="sidebar-link">广度优先算法（BFS）</a></li><li class="sidebar-sub-header"><a href="/4.2.1-DAG调度算法原理与实践.html#深度优先算法-dfs" class="sidebar-link">深度优先算法（DFS）</a></li></ul></li><li class="sidebar-sub-header"><a href="/4.2.1-DAG调度算法原理与实践.html#基于有向无环图-dag-的实现" class="sidebar-link">基于有向无环图（DAG）的实现</a></li></ul></li><li><a href="/4.2.2-开源Airflow DAG调度算法剖析.html" class="sidebar-link">4.2.2 开源Airflow DAG调度算法剖析</a></li><li><a href="/4.2.3-FSM调度算法原理与实践.html" class="sidebar-link">4.2.3 FSM调度算法原理与实践</a></li><li><a href="/4.2.4-开源OSWorkflow FSM调度算法剖析.html" class="sidebar-link">4.2.4 开源OSWorkflow FSM调度算法剖析</a></li><li><a href="/4.2.5-Petri网调度算法原理与实践.html" class="sidebar-link">4.2.5 Petri网调度算法原理与实践</a></li><li><a href="/4.2.6-开源YAWL Petri网调度算法剖析.html" class="sidebar-link">4.2.6 开源YAWL Petri网调度算法剖析</a></li></ul></section></li><li><a href="/4.3-工作流模式-控制流模式.html" class="sidebar-link">4.3 工作流模式-控制流模式</a></li><li><a href="/4.4-资源调度机制-资源模式.html" class="sidebar-link">4.4 资源调度机制-资源模式</a></li><li><a href="/4.5-数据管理机制-数据模式.html" class="sidebar-link">4.5 数据管理机制-数据模式</a></li><li><a href="/4.6-异常处理机制-异常处理模式.html" class="sidebar-link">4.6 异常处理机制-异常处理模式</a></li><li><a href="/4.7-引擎执行模式.html" class="sidebar-link">4.7 引擎执行模式</a></li></ul></section></li><li><a href="/5-事件驱动机制.html" class="sidebar-link">5 事件驱动机制</a></li><li><a href="/6-核心表结构与接口设计.html" class="sidebar-link">6 核心表结构与接口设计</a></li><li><a href="/7-权限系统设计.html" class="sidebar-link">7 权限系统设计</a></li><li><a href="/8-分布式Crontab任务调度.html" class="sidebar-link">8 分布式Crontab任务调度</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第三部份：流程引擎进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="基本概念介绍"><a href="#基本概念介绍" class="header-anchor">#</a> 基本概念介绍</h2> <p>在我们具体展开流程引擎的各种实现方法之前，有必要先交代下这些流程引擎实现过程中涉及到的一些基础技术和概念。</p> <h3 id="拓扑排序"><a href="#拓扑排序" class="header-anchor">#</a> 拓扑排序</h3> <p>拓扑排序是针对有向图（Directed Graph）的一种排序方法，它将有向图中的顶点以线性顺序进行排序，满足以下条件：对于图中的每条有向边 <code>(u, v)</code>，在排序后的序列中，顶点 <code>u</code> 必须排在顶点 <code>v</code> 的前面。</p> <p>拓扑排序仅适用于有向无环图（DAG），即不存在环路的有向图。这是因为如果图中存在环路，就会导致无法进行拓扑排序，因为无法找到满足上述条件的排序顺序。</p> <blockquote><p>实现方法</p></blockquote> <p>拓扑排序可以通过深度优先搜索（DFS）或广度优先搜索（BFS）来实现。基本思路是从图中选择一个没有入边的顶点（即入度为 0 的顶点）作为排序的起点，然后从图中移除与该顶点相连的边，继续寻找没有入边的顶点。这个过程一直持续下去，直到所有的顶点都被排序。</p> <blockquote><p>应用</p></blockquote> <p>拓扑排序在实际中有许多应用，尤其在计算机科学和工程领域中是非常重要的：</p> <ol><li><p><strong>任务调度：</strong> 在工程和计算任务中，拓扑排序能够有效地确定任务执行的顺序，特别是在有依赖关系的情况下。</p></li> <li><p><strong>编译器优化：</strong> 在编译器中，拓扑排序有助于确定源代码中各个模块之间的依赖关系，从而优化编译过程的顺序。</p></li> <li><p><strong>数据流分析：</strong> 在静态分析中，拓扑排序用于确定数据流分析的顺序，以便有效地分析变量之间的依赖关系。</p></li> <li><p><strong>依赖关系分析：</strong> 许多系统和任务之间存在依赖关系，拓扑排序有助于分析这些依赖关系，并确定执行或处理的顺序。</p></li></ol> <p>拓扑排序是一种强大的算法技术，能够帮助处理各种问题中的顺序性和依赖关系，并提供一种有序的处理方式。</p> <p>下面我们对拓展排序的两种实现方法，深度优先搜索和广度优先搜索进行简单的介绍，尤其是广度优先算法（BFS）会作为基于DAG方式实现流程引擎的核心图遍历算法。</p> <h3 id="广度优先算法-bfs"><a href="#广度优先算法-bfs" class="header-anchor">#</a> 广度优先算法（BFS）</h3> <p>广度优先搜索（Breadth-First Search，BFS）是一种图遍历算法，用于遍历或搜索图中的节点。它从一个指定的节点开始，首先访问该节点的所有邻居节点，然后依次访问这些邻居节点的邻居节点，以此类推，直到遍历完整个连通区域。</p> <p>BFS 通常使用队列来实现。</p> <blockquote><p>算法步骤</p></blockquote> <ol><li>选择一个起始节点，将其标记为已访问，并将其加入队列中。</li> <li>从队列中取出一个节点，访问它的所有未标记邻居节点，并将这些邻居节点标记为已访问，并加入队列。</li> <li>重复步骤 2，直到队列为空为止。</li></ol> <p>BFS 的特点是按层级逐步扩展，首先遍历起始节点的所有直接邻居，然后是邻居的邻居，以此类推，直到遍历完整个。</p> <blockquote><p>伪代码实现</p></blockquote> <p>输入：图Graph和它的根节点start_node</p> <p>输出：遍历图Graph</p> <div class="language-python extra-class"><pre class="language-python"><code>BFS<span class="token punctuation">(</span>Graph<span class="token punctuation">,</span> start_node<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queue <span class="token operator">=</span> empty queue  <span class="token operator">//</span> 这里使用到队列的数据结构
    visited <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

    add start_node to queue
    mark start_node <span class="token keyword">as</span> visited

    <span class="token keyword">while</span> queue <span class="token keyword">is</span> <span class="token keyword">not</span> empty<span class="token punctuation">:</span>
        current_node <span class="token operator">=</span> queue<span class="token punctuation">.</span>dequeue<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span> current_node

        <span class="token keyword">for</span> each neighbor <span class="token keyword">in</span> Graph<span class="token punctuation">.</span>adjacentNodes<span class="token punctuation">(</span>current_node<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> neighbor <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token keyword">in</span> visited<span class="token punctuation">:</span>
                add neighbor to queue
                mark neighbor <span class="token keyword">as</span> visited
</code></pre></div><p>这段伪代码描述了 BFS 算法的基本逻辑：</p> <ol><li>从指定的起始节点开始。</li> <li>使用一个队列(FIFO)存储待访问的节点，并使用一个集合（可以是哈希集）来标记已经访问过的节点。</li> <li>将起始节点加入队列，标记为已访问。</li> <li>当队列不为空时，循环执行以下操作：
<ul><li>取出队列中的当前节点。</li> <li>访问并处理当前节点。</li> <li>遍历当前节点的邻居节点：
<ul><li>如果邻居节点尚未被访问，将其加入队列，并标记为已访问。</li></ul></li></ul></li></ol> <p>请注意，伪代码中的 <code>Graph.adjacentNodes(current_node)</code> 表示获取当前节点的邻居节点列表。</p> <blockquote><p>举例说明</p></blockquote> <p>1、首先将起始节点A推送到队列中，并将节点A表示为已访问</p> <img src="/assets/img/3 bfs-1.77d036bf.png" alt="image-20231030235734431" style="zoom:50%;"> <p>2、从队列头中取出节点A，并获取其邻居节点BC，把BC节点推送到队列，并标记为已访问</p> <img src="/assets/img/3 bfs-2.ee59158f.png" alt="image-20231031000040786" style="zoom:50%;"> <p>3、从队列头中取出节点B，并获取其邻居节点DE，把DE节点推送到队列，并标记为已访问</p> <img src="/assets/img/3 bfs-3.e904f097.png" alt="image-20231031000241471" style="zoom:50%;"> <p>4、从队列头中取出节点C，并获取其邻居节点FG，把FG节点推送到队列，并标记为已访问</p> <img src="/assets/img/3 bfs-4.edaf1842.png" alt="image-20231031000429387" style="zoom:50%;"> <p>5、然后继续从队列头中，依次把D、E、F、G节点取出来，由于DEFG都是叶子节点没有邻居节点，所以就没有入队列的操作。最后队列为空，图遍历结束。</p> <img src="/assets/img/3 bfs-5.4f712b6c.png" alt="image-20231031000642558" style="zoom:50%;"> <blockquote><p>应用</p></blockquote> <ul><li><p><strong>最短路径和最小操作问题：</strong> 在无权图中，BFS 可以用于查找节点 A 到节点 B 的最短路径。在这种情况下，BFS 从起始节点开始，逐层遍历直到找到目标节点。这同样适用于网络中数据包的传输路径、社交网络中的最短关系链等。</p></li> <li><p><strong>解决谜题和游戏：</strong> BFS 可用于解决一些谜题，例如迷宫问题或寻找棋盘游戏中的最优解。通过逐层搜索可能的路径，可以找到解决方案或最优解。</p></li> <li><p><strong>网络广播和社交网络分析：</strong> 在计算机网络中，BFS 可用于广播信息或寻找特定信息的传播路径。在社交网络分析中，BFS 可用于查找特定节点的关联节点，以及发现社交网络中的群体或子网络。</p></li> <li><p><strong>拓扑排序：</strong> BFS 可用于拓扑排序，在有向图中对节点进行排序，以便进行有序处理或执行。</p></li> <li><p><strong>检测环路：</strong> BFS 在检测图中是否存在环路时也很有用。在搜索过程中，若发现某节点的邻居节点已经被访问但并非其父节点，说明图中存在环路。</p></li></ul> <p>这些只是广度优先搜索在实际应用中的一些典型场景。BFS 作为一种重要的图遍历算法，被广泛应用于网络路由、数据检索、图论、计算机科学和各种领域的问题求解。</p> <h3 id="深度优先算法-dfs"><a href="#深度优先算法-dfs" class="header-anchor">#</a> 深度优先算法（DFS）</h3> <p>深度优先搜索（Depth-First Search，DFS）也是一种用于遍历或搜索图的算法。DFS 从起始节点开始，沿着一条路径尽可能深地遍历完这条路径，直到到达最深的节点，然后回溯并探索其他路径。</p> <blockquote><p>算法步骤</p></blockquote> <ol><li>从指定起始节点开始递归或使用栈的方式遍历与其相邻的节点。</li> <li>对于每个相邻节点，若该节点未被访问，则递归或压入栈并访问该节点。</li> <li>继续对未被访问的相邻节点进行深度优先搜索。</li></ol> <blockquote><p>伪代码实现</p></blockquote> <p>输入：图Graph和它的根节点start_node</p> <p>输出：遍历图Graph</p> <div class="language-python extra-class"><pre class="language-python"><code>DFS<span class="token punctuation">(</span>Graph<span class="token punctuation">,</span> start_node<span class="token punctuation">)</span><span class="token punctuation">:</span>
    stack <span class="token operator">=</span> empty stack  <span class="token operator">//</span> 这里使用到栈的数据结构
    visited <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">//</span> 用来存储已经访问过的节点

    add start_node to stack

    <span class="token keyword">while</span> stack <span class="token keyword">is</span> <span class="token keyword">not</span> empty<span class="token punctuation">:</span>
        current_node <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> current_node <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token keyword">in</span> visited<span class="token punctuation">:</span>
            <span class="token keyword">print</span> current_node
            mark current_node <span class="token keyword">as</span> visited

            <span class="token keyword">for</span> each neighbor <span class="token keyword">in</span> reverse order of Graph<span class="token punctuation">.</span>adjacentNodes<span class="token punctuation">(</span>current_node<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> neighbor <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token keyword">in</span> visited<span class="token punctuation">:</span>
                    add neighbor to stack
</code></pre></div><p>请注意，伪代码中的 <code>Graph.adjacentNodes(current_node)</code> 表示获取当前节点的邻居节点列表。</p> <p>上述伪代码演示了典型的迭代式 DFS 实现方式。这里主要使用栈来模拟递归的行为。</p> <p>主要步骤包括：</p> <ol><li>从起始节点开始，将其加入栈。</li> <li>当栈不为空时，循环执行以下操作：
<ul><li>弹出栈顶的当前节点。</li> <li>若当前节点未被访问，则访问并处理该节点，同时标记为已访问。</li> <li>遍历当前节点的邻居节点，将未被访问的邻居节点加入栈。</li></ul></li></ol> <p>通过使用栈的迭代方式，深度优先搜索可以模拟递归的深度探索过程，不仅更符合典型的 DFS 特性，还能有效地遍历图中的节点。</p> <blockquote><p>举例说明</p></blockquote> <p>1、如下图，首先将图的根节点A入栈</p> <img src="/assets/img/3 dfs-1.09938a9b.png" alt="image-20231031091412821" style="zoom:50%;"> <p>2、然后弹出栈顶节点A，标记A为已访问过，并且把C、B节点入栈</p> <img src="/assets/img/3 dfs-2.0830cf93.png" alt="image-20231031091504615" style="zoom:50%;"> <p>3、弹出栈顶节点B，标记B为已访问过，并且把E、D节点入栈</p> <img src="/assets/img/3 dfs-3.db516b54.png" alt="image-20231031091552706" style="zoom:50%;"> <p>4、弹出栈顶节点D，标记D为已访问过，由于D节点是叶子节点，没有邻居节点，所以没有入栈操作</p> <img src="/assets/img/3 dfs-4.37ba83fe.png" alt="image-20231031091803968" style="zoom:50%;"> <p>5、弹出栈顶节点E，标记E为已访问过，由于E节点是叶子节点，没有邻居节点，所以没有入栈操作</p> <img src="/assets/img/3 dfs-5.4697fac6.png" alt="image-20231031091930840" style="zoom:50%;"> <p>6、弹出栈顶节点C，标记C为已访问过，并且把G、F节点入栈</p> <img src="/assets/img/3 dfs-6.393c318f.png" alt="image-20231031092203755" style="zoom:50%;"> <p>7、弹出栈顶节点F，标记F为已访问过，由于F节点是叶子节点，没有邻居节点，所以没有入栈操作</p> <img src="/assets/img/3 dfs-7.4f0dbdbb.png" alt="image-20231031092324418" style="zoom:50%;"> <p>8、弹出栈顶节点G，标记G为已访问过，由于G节点是叶子节点，没有邻居节点，所以没有入栈操作</p> <img src="/assets/img/3 dfs-8.039a33c4.png" alt="image-20231031092414849" style="zoom:50%;"> <p>9、此时栈为空，遍历结束</p> <blockquote><p>应用</p></blockquote> <ul><li><strong>解决路径问题：</strong> DFS 通常用于解决路径或连接问题，比如查找图中的路径或寻找连通组件。</li> <li><strong>拓扑排序：</strong> 通过 DFS 可以实现拓扑排序，找出有向无环图中节点的排序序列。</li> <li><strong>游戏解决：</strong> 在游戏设计中，DFS 可用于解决迷宫问题或寻找路径等。</li></ul> <h2 id="基于有向无环图-dag-的实现"><a href="#基于有向无环图-dag-的实现" class="header-anchor">#</a> 基于有向无环图（DAG）的实现</h2> <p>有向无环图（Directed Acyclic Graph，DAG）是图论中的一种特殊类型的图，它由顶点和有向边组成，这些边的方向指示了顶点之间的关系，并且图中不存在环路。</p> <ul><li><strong>有向边：</strong> 每条边都有一个明确的方向，从一个顶点指向另一个顶点。这个方向性表示了顶点之间的关系，例如，如果从顶点 A 到顶点 B 有一条有向边，那么意味着 A 和 B 之间存在某种类型的指向性关系。</li> <li><strong>无环：</strong> 无向无环图中不存在环路，也就是说，无法从一个顶点出发沿着有向边回到该顶点，不论经过多少条边。这使得无向无环图变得特别重要，因为没有环路，从而没有循环依赖或者无限循环的问题，这对于许多算法和数据结构有着重要的意义。</li></ul> <p>DAG 在计算机科学和相关领域中应用广泛，特别是在任务调度、数据流处理、编译器优化、算法设计等方面。例如，在本书介绍的工作流引擎中，任务之间的依赖关系可以用 DAG 来表示，这有助于有效地安排任务的执行顺序。</p> <p>基于有向无环图（DAG）的流程引擎是一种使用图论中的有向无环图来描述和管理流程的引擎。在这种设计中，<strong>图的顶点表示任务或状态，有向边表示任务或状态之间的依赖关系或顺序关系</strong>。</p> <blockquote><p>设计思路</p></blockquote> <ul><li><p><strong>顶点表示任务或状态：</strong> 每个顶点代表一个特定的任务或状态。例如，任务 A、任务 B、任务 C 等可以是图中的顶点。</p></li> <li><p><strong>有向边表示依赖关系：</strong> 有向边表示任务或状态之间的依赖关系。例如，如果任务 A 必须在任务 B 之前执行，则存在从 A 到 B 的有向边。</p></li> <li><p><strong>拓扑排序：</strong> 使用拓扑排序算法对有向无环图进行排序，以确定任务或状态的执行顺序。拓扑排序可确保按照图中的依赖关系进行顺序执行。常用广度优先算法或深度优先算法实现。</p></li> <li><p><strong>状态迁移与执行逻辑：</strong> 每个任务或状态执行的逻辑与顶点相关联。当确定某个任务或状态处于执行阶段时，执行相应的任务逻辑。</p></li></ul> <blockquote><p>实现流程引擎的步骤</p></blockquote> <ol><li><strong>定义顶点和有向边：</strong> 将流程中的任务或状态定义为图的顶点，并确定它们之间的依赖关系。</li> <li><strong>构建有向无环图：</strong> 基于任务之间的依赖关系构建有向无环图。确保图中不存在循环依赖。</li> <li><strong>拓扑排序：</strong> 使用拓扑排序算法（这里使用广度优先算法）对图进行排序，以确定任务的执行顺序。这确定了任务或状态的顺序性。</li> <li><strong>任务执行与状态切换：</strong> 根据拓扑排序的结果执行任务或状态，确保按顺序进行。</li></ol> <p>基于有向无环图的流程引擎利用图论中的拓扑排序等算法，提供了对任务或状态执行顺序的有效管理和控制。这种方法非常适用于复杂流程的管理和执行。目前主流的Airflow开源软件其核心的引擎调度算法就是基于DAG方式实现。</p> <blockquote><p>代码实现</p></blockquote> <ol><li>定义<code>Task</code>类：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Task</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> status<span class="token punctuation">,</span> dependencies<span class="token punctuation">,</span> actions<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">id</span> <span class="token operator">=</span> <span class="token builtin">id</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>status <span class="token operator">=</span> status
        self<span class="token punctuation">.</span>dependencies <span class="token operator">=</span> dependencies
        self<span class="token punctuation">.</span>actions <span class="token operator">=</span> actions
</code></pre></div><p><code>Task</code>类表示一个工作流中的任务。它包含以下属性：</p> <ul><li><code>id</code>：任务的唯一标识符。</li> <li><code>name</code>：任务的名称。</li> <li><code>status</code>：任务的状态，例如“pending”或“completed”。</li> <li><code>dependencies</code>：任务所依赖的其他任务的ID列表。</li> <li><code>actions</code>：任务执行时需要执行的动作（函数）列表。</li></ul> <ol start="2"><li>定义<code>WorkflowEngine</code>类：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">WorkflowEngine</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>tasks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        self<span class="token punctuation">.</span>execution_queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p><code>WorkflowEngine</code>类表示工作流引擎，它负责管理和执行任务。它包含以下属性：</p> <ul><li><code>tasks</code>：一个字典，存储工作流中的所有任务，键是任务ID，值是任务对象。</li> <li><code>execution_queue</code>：一个列表，存储待执行的任务。</li></ul> <ol start="3"><li><code>add_task</code>方法：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">WorkflowEngine</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
    <span class="token keyword">def</span> <span class="token function">add_task</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> task<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>tasks<span class="token punctuation">[</span>task<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">]</span> <span class="token operator">=</span> task
</code></pre></div><p><code>add_task</code>方法将任务添加到工作流引擎的<code>tasks</code>字典中。</p> <ol start="4"><li><code>execute_task</code>方法：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">WorkflowEngine</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>

    <span class="token keyword">def</span> <span class="token function">execute_task</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> task<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Executing task </span><span class="token interpolation"><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token comment"># execute actions in task.actions</span>
        <span class="token keyword">for</span> action <span class="token keyword">in</span> task<span class="token punctuation">.</span>actions<span class="token punctuation">:</span>
            action<span class="token punctuation">(</span><span class="token punctuation">)</span>
        task<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'completed'</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Task </span><span class="token interpolation"><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">}</span></span><span class="token string"> completed\n&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><p><code>execute_task</code>方法负责执行单个任务。它首先打印一条消息表示任务正在执行，然后遍历任务的<code>actions</code>列表并执行每个动作。最后，将任务状态设置为“completed”并打印一条消息表示任务已完成。</p> <ol start="5"><li><code>execute_workflow</code>方法：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">WorkflowEngine</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
    <span class="token keyword">def</span> <span class="token function">execute_workflow</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> task <span class="token keyword">in</span> self<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> task<span class="token punctuation">.</span>dependencies<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>execution_queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>task<span class="token punctuation">)</span>

        <span class="token keyword">while</span> self<span class="token punctuation">.</span>execution_queue<span class="token punctuation">:</span>
            task <span class="token operator">=</span> self<span class="token punctuation">.</span>execution_queue<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token builtin">all</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>tasks<span class="token punctuation">[</span>dep<span class="token punctuation">]</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'completed'</span> <span class="token keyword">for</span> dep <span class="token keyword">in</span> task<span class="token punctuation">.</span>dependencies<span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>execute_task<span class="token punctuation">(</span>task<span class="token punctuation">)</span>
                <span class="token keyword">for</span> dependent_task <span class="token keyword">in</span> self<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> task<span class="token punctuation">.</span><span class="token builtin">id</span> <span class="token keyword">in</span> dependent_task<span class="token punctuation">.</span>dependencies<span class="token punctuation">:</span>
                        dependent_task<span class="token punctuation">.</span>dependencies<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token keyword">not</span> dependent_task<span class="token punctuation">.</span>dependencies<span class="token punctuation">:</span>
                            self<span class="token punctuation">.</span>execution_queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dependent_task<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 如果任务的依赖项尚未满足，将任务放回执行队列的末尾</span>
                self<span class="token punctuation">.</span>execution_queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>task<span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Task </span><span class="token interpolation"><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">}</span></span><span class="token string">'s dependencies:</span><span class="token interpolation"><span class="token punctuation">{</span>task<span class="token punctuation">.</span>dependencies<span class="token punctuation">}</span></span><span class="token string"> is not completed\n&quot;</span></span><span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>  <span class="token comment"># 避免过度占用CPU资源    </span>
</code></pre></div><p><code>execute_workflow</code>方法负责执行整个工作流。它首先将没有依赖项的任务添加到执行队列中。然后，当执行队列不为空时，从队列中取出一个任务并检查其所有依赖项是否已完成。如果所有依赖项都已完成，则执行任务，并从依赖于该任务的其他任务的依赖项列表中移除该任务。如果某个任务的依赖项列表为空，将其添加到执行队列中。这个过程会一直重复，直到执行队列为空。</p> <ol start="6"><li>创建任务和工作流引擎实例：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 定义任务</span>
task_a <span class="token operator">=</span> Task<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Task A'</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token string">'pending'</span><span class="token punctuation">,</span> dependencies<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> actions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
task_b <span class="token operator">=</span> Task<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'B'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Task B'</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token string">'pending'</span><span class="token punctuation">,</span> dependencies<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> actions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
task_c <span class="token operator">=</span> Task<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'C'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Task C'</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token string">'pending'</span><span class="token punctuation">,</span> dependencies<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> actions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
task_d <span class="token operator">=</span> Task<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'D'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Task D'</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token string">'pending'</span><span class="token punctuation">,</span> dependencies<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> actions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 创建工作流引擎</span>
workflow_engine <span class="token operator">=</span> WorkflowEngine<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 添加任务</span>
workflow_engine<span class="token punctuation">.</span>add_task<span class="token punctuation">(</span>task_a<span class="token punctuation">)</span>
workflow_engine<span class="token punctuation">.</span>add_task<span class="token punctuation">(</span>task_b<span class="token punctuation">)</span>
workflow_engine<span class="token punctuation">.</span>add_task<span class="token punctuation">(</span>task_c<span class="token punctuation">)</span>
workflow_engine<span class="token punctuation">.</span>add_task<span class="token punctuation">(</span>task_d<span class="token punctuation">)</span>

<span class="token comment"># 执行工作流</span>
workflow_engine<span class="token punctuation">.</span>execute_workflow<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这部分代码创建了四个任务和一个工作流引擎实例。任务A没有依赖项，任务B和C依赖于任务A，任务D依赖于任务B和C。</p> <p>最后添加任务并执行工作流。</p> <img src="/assets/img/3 dag-demo.b0edd7a5.png" alt="image-20231031131533929" style="zoom:50%;"> <p>执行代码：</p> <div class="language- extra-class"><pre class="language-text"><code>python dag.py
</code></pre></div><p>如果一切顺利，你会看到如下输出：</p> <div class="language- extra-class"><pre class="language-text"><code>Executing task A
Task A completed

Executing task B
Task B completed

Executing task C
Task C completed

Executing task D
Task D completed
</code></pre></div><img src="/assets/img/wechat.50adb4d4.png" style="zoom:15%;"></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">9/12/2024, 11:20:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/4.1-WFMC工作流参考模型.html" class="prev">
        4.1 WFMC工作流参考模型
      </a></span> <span class="next"><a href="/4.2.2-开源Airflow DAG调度算法剖析.html">
        4.2.2 开源Airflow DAG调度算法剖析
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b8820ad2.js" defer></script><script src="/assets/js/2.a6c4a04f.js" defer></script><script src="/assets/js/1.04b49174.js" defer></script><script src="/assets/js/18.5e539e58.js" defer></script>
  </body>
</html>
