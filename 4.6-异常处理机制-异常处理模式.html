<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>概述 | 流程引擎原理与实践</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?925c3dadc75643902ba1d4bef48fa406";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script></script>
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="国内首本从工程角度系统性介绍流程引擎的技术体系">
    <meta name="baidu-site-verification" content="codeva-c7FETTq8fo">
    <meta name="keywords" content="开源电子书，工作流技术体系，流程引擎技术体系，工作流，流程引擎，事件驱动机制，权限系统设计，云原生工作流，Crontab工作流，工作流系统架构，流程建模，DAG，FSM，WFMC，BPMN，BPM，Airflow，OsWorkflow，Petri">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.b8820ad2.js" as="script"><link rel="preload" href="/assets/js/2.a6c4a04f.js" as="script"><link rel="preload" href="/assets/js/1.04b49174.js" as="script"><link rel="preload" href="/assets/js/37.ac210fe0.js" as="script"><link rel="prefetch" href="/assets/js/10.01c85a43.js"><link rel="prefetch" href="/assets/js/11.36ba8367.js"><link rel="prefetch" href="/assets/js/12.49270403.js"><link rel="prefetch" href="/assets/js/13.9964bf6f.js"><link rel="prefetch" href="/assets/js/14.1ffdb2cc.js"><link rel="prefetch" href="/assets/js/15.3ec6e020.js"><link rel="prefetch" href="/assets/js/16.223f06e4.js"><link rel="prefetch" href="/assets/js/17.49a0611a.js"><link rel="prefetch" href="/assets/js/18.5e539e58.js"><link rel="prefetch" href="/assets/js/19.08beb14f.js"><link rel="prefetch" href="/assets/js/20.2fd50ddb.js"><link rel="prefetch" href="/assets/js/21.94815126.js"><link rel="prefetch" href="/assets/js/22.7335372f.js"><link rel="prefetch" href="/assets/js/23.efd43c2e.js"><link rel="prefetch" href="/assets/js/24.33511251.js"><link rel="prefetch" href="/assets/js/25.9103752e.js"><link rel="prefetch" href="/assets/js/26.be3c6fce.js"><link rel="prefetch" href="/assets/js/27.a66d9ab9.js"><link rel="prefetch" href="/assets/js/28.db24d1a7.js"><link rel="prefetch" href="/assets/js/29.e639cc41.js"><link rel="prefetch" href="/assets/js/3.8ee85a39.js"><link rel="prefetch" href="/assets/js/30.9f96cad1.js"><link rel="prefetch" href="/assets/js/31.76245b5d.js"><link rel="prefetch" href="/assets/js/32.01a0bbd7.js"><link rel="prefetch" href="/assets/js/33.6cb05ad6.js"><link rel="prefetch" href="/assets/js/34.370a24a6.js"><link rel="prefetch" href="/assets/js/35.83692dfe.js"><link rel="prefetch" href="/assets/js/36.c783d15a.js"><link rel="prefetch" href="/assets/js/38.07dc64eb.js"><link rel="prefetch" href="/assets/js/39.4ef28dca.js"><link rel="prefetch" href="/assets/js/4.9d17ba4d.js"><link rel="prefetch" href="/assets/js/40.a8fcb556.js"><link rel="prefetch" href="/assets/js/41.98d7d1f0.js"><link rel="prefetch" href="/assets/js/42.e31dd182.js"><link rel="prefetch" href="/assets/js/43.822702b0.js"><link rel="prefetch" href="/assets/js/44.50c68594.js"><link rel="prefetch" href="/assets/js/45.4e32699e.js"><link rel="prefetch" href="/assets/js/46.09f04e77.js"><link rel="prefetch" href="/assets/js/47.35c13096.js"><link rel="prefetch" href="/assets/js/48.99dfb60f.js"><link rel="prefetch" href="/assets/js/49.e1984c48.js"><link rel="prefetch" href="/assets/js/5.5682b71e.js"><link rel="prefetch" href="/assets/js/50.4242e15e.js"><link rel="prefetch" href="/assets/js/51.bdee7514.js"><link rel="prefetch" href="/assets/js/52.3b23c6f4.js"><link rel="prefetch" href="/assets/js/53.b6798440.js"><link rel="prefetch" href="/assets/js/54.ac356f09.js"><link rel="prefetch" href="/assets/js/55.79840f1c.js"><link rel="prefetch" href="/assets/js/56.343306c2.js"><link rel="prefetch" href="/assets/js/57.90f7511a.js"><link rel="prefetch" href="/assets/js/58.59457ff7.js"><link rel="prefetch" href="/assets/js/59.a05e2b0c.js"><link rel="prefetch" href="/assets/js/6.6aa986f5.js"><link rel="prefetch" href="/assets/js/60.7d6e698d.js"><link rel="prefetch" href="/assets/js/61.d1952570.js"><link rel="prefetch" href="/assets/js/62.a15b1cb5.js"><link rel="prefetch" href="/assets/js/63.69030ee5.js"><link rel="prefetch" href="/assets/js/64.a60b63a8.js"><link rel="prefetch" href="/assets/js/65.c1986cb9.js"><link rel="prefetch" href="/assets/js/66.e5747c76.js"><link rel="prefetch" href="/assets/js/67.c7de5e6a.js"><link rel="prefetch" href="/assets/js/68.96f4e3c6.js"><link rel="prefetch" href="/assets/js/69.db66370e.js"><link rel="prefetch" href="/assets/js/7.1fb8aaeb.js"><link rel="prefetch" href="/assets/js/70.8962d544.js"><link rel="prefetch" href="/assets/js/71.695bacdf.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.7bd035a8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="流程引擎原理与实践" class="logo"> <span class="site-name can-hide">流程引擎原理与实践</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-引言.html" class="nav-link">
  1 引言
</a></li><li class="dropdown-item"><!----> <a href="/2-概念.html" class="nav-link">
  2 概念
</a></li><li class="dropdown-item"><!----> <a href="/3-流程建模和解析.html" class="nav-link">
  3 流程建模和解析
</a></li><li class="dropdown-item"><!----> <a href="/4-流程引擎的核心组件.html" class="nav-link">
  4 流程引擎的核心组件
</a></li><li class="dropdown-item"><!----> <a href="/5-事件驱动机制.html" class="nav-link">
  5 事件驱动机制
</a></li><li class="dropdown-item"><!----> <a href="/6-核心表结构与接口设计.html" class="nav-link">
  6 核心表结构与接口设计
</a></li><li class="dropdown-item"><!----> <a href="/7-权限系统设计.html" class="nav-link">
  7 权限系统设计
</a></li><li class="dropdown-item"><!----> <a href="/8-分布式Crontab任务调度.html" class="nav-link">
  8 分布式Crontab任务调度
</a></li><li class="dropdown-item"><!----> <a href="/9-流程分析.html" class="nav-link">
  9 流程分析
</a></li><li class="dropdown-item"><!----> <a href="/10-云原生工作流.html" class="nav-link">
  10 云原生工作流
</a></li><li class="dropdown-item"><!----> <a href="/11-多引擎分布式系统实现.html" class="nav-link">
  11 多引擎分布式系统实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="帮助" class="dropdown-title"><span class="title">帮助</span> <span class="arrow down"></span></button> <button type="button" aria-label="帮助" class="mobile-dropdown-title"><span class="title">帮助</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about.html" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="/sponsor.html" class="nav-link">
  打赏赞助
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/guanchao/workflow-engine-book" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-引言.html" class="nav-link">
  1 引言
</a></li><li class="dropdown-item"><!----> <a href="/2-概念.html" class="nav-link">
  2 概念
</a></li><li class="dropdown-item"><!----> <a href="/3-流程建模和解析.html" class="nav-link">
  3 流程建模和解析
</a></li><li class="dropdown-item"><!----> <a href="/4-流程引擎的核心组件.html" class="nav-link">
  4 流程引擎的核心组件
</a></li><li class="dropdown-item"><!----> <a href="/5-事件驱动机制.html" class="nav-link">
  5 事件驱动机制
</a></li><li class="dropdown-item"><!----> <a href="/6-核心表结构与接口设计.html" class="nav-link">
  6 核心表结构与接口设计
</a></li><li class="dropdown-item"><!----> <a href="/7-权限系统设计.html" class="nav-link">
  7 权限系统设计
</a></li><li class="dropdown-item"><!----> <a href="/8-分布式Crontab任务调度.html" class="nav-link">
  8 分布式Crontab任务调度
</a></li><li class="dropdown-item"><!----> <a href="/9-流程分析.html" class="nav-link">
  9 流程分析
</a></li><li class="dropdown-item"><!----> <a href="/10-云原生工作流.html" class="nav-link">
  10 云原生工作流
</a></li><li class="dropdown-item"><!----> <a href="/11-多引擎分布式系统实现.html" class="nav-link">
  11 多引擎分布式系统实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="帮助" class="dropdown-title"><span class="title">帮助</span> <span class="arrow down"></span></button> <button type="button" aria-label="帮助" class="mobile-dropdown-title"><span class="title">帮助</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about.html" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="/sponsor.html" class="nav-link">
  打赏赞助
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/guanchao/workflow-engine-book" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第一部份：流程引擎基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>第二部份：流程引擎实现</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>4 流程引擎的核心组件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/4.1-WFMC工作流参考模型.html" class="sidebar-link">4.1 WFMC工作流参考模型</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>4.2 任务调度机制</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/4.3-工作流模式-控制流模式.html" class="sidebar-link">4.3 工作流模式-控制流模式</a></li><li><a href="/4.4-资源调度机制-资源模式.html" class="sidebar-link">4.4 资源调度机制-资源模式</a></li><li><a href="/4.5-数据管理机制-数据模式.html" class="sidebar-link">4.5 数据管理机制-数据模式</a></li><li><a href="/4.6-异常处理机制-异常处理模式.html" class="active sidebar-link">4.6 异常处理机制-异常处理模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#异常处理的一般框架" class="sidebar-link">异常处理的一般框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#_1、异常的类型" class="sidebar-link">1、异常的类型</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#_2、异常的检测" class="sidebar-link">2、异常的检测</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#_3、异常的处理策略" class="sidebar-link">3、异常的处理策略</a></li></ul></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#数据库中的事务" class="sidebar-link">数据库中的事务</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#业务流程中的事务" class="sidebar-link">业务流程中的事务</a></li></ul></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#补偿" class="sidebar-link">补偿</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#特性和步骤" class="sidebar-link">特性和步骤</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#补偿机制示例" class="sidebar-link">补偿机制示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#编程中的异常处理" class="sidebar-link">编程中的异常处理</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#异常处理机制的实现" class="sidebar-link">异常处理机制的实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#局部异常处理" class="sidebar-link">局部异常处理</a></li><li class="sidebar-sub-header"><a href="/4.6-异常处理机制-异常处理模式.html#全局异常处理" class="sidebar-link">全局异常处理</a></li></ul></li></ul></li><li><a href="/4.7-引擎执行模式.html" class="sidebar-link">4.7 引擎执行模式</a></li></ul></section></li><li><a href="/5-事件驱动机制.html" class="sidebar-link">5 事件驱动机制</a></li><li><a href="/6-核心表结构与接口设计.html" class="sidebar-link">6 核心表结构与接口设计</a></li><li><a href="/7-权限系统设计.html" class="sidebar-link">7 权限系统设计</a></li><li><a href="/8-分布式Crontab任务调度.html" class="sidebar-link">8 分布式Crontab任务调度</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第三部份：流程引擎进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>工作流中的异常是指在执行过程中遇到的预期之外的事件。这些事件可能是因为现实世界的活动和它们的形式表示之间的差异导致的。异常并不是错误，而是被认为是偏离预期的事件，或者是在原始过程模型中没有被解释的事件。这类事件在实际的工作环境中经常发生。</p> <p>而且，异常是流程的基本组成部分，实际上在企业执行的日常任务中，很大一部分可以归类为异常处理工作。因此，工作流程的每个执行实例都很可能包含一些与计划的偏差。这种偏离计划的情况不应被视为错误，而是作为工作活动的一个自然和有价值的部分，为学习提供了机会，从而为未来的实例制定计划。</p> <h2 id="异常处理的一般框架"><a href="#异常处理的一般框架" class="header-anchor">#</a> 异常处理的一般框架</h2> <p>异常处理的一般框架可以描述如下：</p> <h3 id="_1、异常的类型"><a href="#_1、异常的类型" class="header-anchor">#</a> 1、异常的类型</h3> <p>异常是在流程执行过程中发生的特定时间点的独特的、可识别的事件。这种情况被认为是可以立即检测到的，并具有特定的类型。</p> <p>工作流中的异常类型主要有以下五种：</p> <ol><li>任务故障：当前正在执行的任务无法在其当前执行状态下继续执行或进一步前进。这可能是由于用户发起的程序终止、与任务相关的硬件、软件或网络资源的故障，或用户指示相关的任务应该被视为失败而不是成功完成。</li> <li>截止日期到期：在达到期限且任务尚未启动或完成时，就会触发异常。</li> <li>资源不可用性：任务在执行期间需要访问一个或多个资源，如果这些资源在启动时无法使用，那么通常不可能继续进行。资源不可用性可能涉及某种形式的升级或人工干预。</li> <li>外部触发器：这是指示任务的常见方法，即发生了影响任务的事件，需要某种形式的处理。这些触发器可以来自内部和外部来源，并且可能是非链接的任务。</li> <li>约束违反：在流程模型中使用约束是指定流程中控制流、数据或资源元素上的操作不变量的一种常用方法，这些元素需要进行维护，以确保保持其完整性和操作一致性。</li></ol> <p>如果从异常影响的范围来划分，可以分为以下两个层次：</p> <h4 id="任务级别的异常处理"><a href="#任务级别的异常处理" class="header-anchor">#</a> 任务级别的异常处理</h4> <p>从资源的角度分析，我们可以看到任务的生命周期里一共有6种状态，分别是：等待分配资源（offered）、指派一个资源负责执行（allocated）、开始（started）、失败（failed）、完成（completed），如下图所示：。</p> <p>当任务发生异常时，可能出出现如下15种可能的状态转换。</p> <img src="/assets/img/4 任务级别的异常处理状态转换.432a0c76.png" alt="image-20231218230421444" style="zoom:67%;"> <p>如下图所示，当任务处于offered状态时，如果发生异常，它有如下四种可能的状态变换：</p> <table><thead><tr><th>缩写</th> <th>状态变换</th> <th>说明</th></tr></thead> <tbody><tr><td>OCO</td> <td>continue-offer</td> <td>任务已提供给一个或多个资源，其状态不会因异常而改变。</td></tr> <tr><td>ORO</td> <td>reoffer</td> <td>任务已提供给一个或多个资源，但由于例外情况，这些提供被撤回，任务再次提供给一个或多个资源（这些资源不一定与之前提供给它的资源相同）。</td></tr> <tr><td>OFF</td> <td>force-fail-o</td> <td>任务已提供给一个或多个资源，这些提供被撤回，任务的状态变为失败，此路径上的任何后续任务都不会触发。</td></tr> <tr><td>OFC</td> <td>force-complete-o</td> <td>该任务已提供给一个或多个资源，这些提供被撤回，任务的状态变为已完成，所有后续任务都被触发</td></tr></tbody></table> <img src="/assets/img/4 offered状态的可能转换.d9bbdcac.png" alt="image-20231218230845278" style="zoom:50%;"> <p>当状态处于allocated状态时，如果发生异常，它会出现以下五种可能的状态变换：</p> <table><thead><tr><th>缩写</th> <th>状态变换</th> <th>说明</th></tr></thead> <tbody><tr><td>ACA</td> <td>continue-allocation</td> <td>任务已分配给特定资源，该资源将在未来某个时间执行该任务，异常情况不会导致任务状态发生变化。</td></tr> <tr><td>ARA</td> <td>reallocate</td> <td>任务已分配给某一资源，该分配已撤销，任务被分配给另一资源。</td></tr> <tr><td>AFF</td> <td>force-fail-a</td> <td>任务已分配给某一资源，该资源分配被撤销，任务的状态变为失败，不会触发后续任务。</td></tr> <tr><td>AFC</td> <td>force-complete-a</td> <td>任务已分配给某一资源，该资源分配被撤销，任务的状态变为已完成，所有后续任务都会触发。</td></tr> <tr><td>ARO</td> <td>reoffer-a</td> <td>任务已分配给某个资源，该分配被撤销，任务被提供给一个或多个资源（该组不一定包括之前分配给它的资源）</td></tr></tbody></table> <img src="/assets/img/4 allocated的可能状态变换.6f0b1cf2.png" alt="image-20231218232318712" style="zoom:50%;"> <p>当状态处于started状态时，它处理异常处理时，有如下五种可能得状态变换：</p> <table><thead><tr><th>缩写</th> <th>状态变换</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td>SCE</td> <td>continue-execution</td> <td style="text-align:left;">任务已启动，其状态不会因异常而改变。</td></tr> <tr><td>SRS</td> <td>restart</td> <td style="text-align:left;">任务已启动，当前执行实例的进度停止，任务由之前执行该任务的同一资源从头开始重新启动。</td></tr> <tr><td>SRA</td> <td>reallocate-s</td> <td style="text-align:left;">任务已启动，当前执行实例的进度停止，任务被重新分配到不同的资源供以后执行。</td></tr> <tr><td>SRO</td> <td>reoffer-s</td> <td style="text-align:left;">任务已启动，当前执行实例的进度已停止，并将其提供给一个或多个资源（该组资源不一定包括正在执行该任务的资源）。</td></tr> <tr><td>SFF</td> <td>force-fail</td> <td style="text-align:left;">正在执行的任务将停止继续执行，其状态也将变为失败。不会触发后续任务。</td></tr> <tr><td>SFC</td> <td>force-complete</td> <td style="text-align:left;">正在执行的任务将停止继续执行，其状态也变为已完成。所有后续任务都被触发。</td></tr></tbody></table> <img src="/assets/img/4 started状态的可能变换.58986e93.png" alt="image-20231218232636848" style="zoom:50%;"> <p>在任务级别的异常处理中，处理方法取决于检测任务的当前执行状态以及处理异常后的状态。例如，当检测到正在执行的任务失败时，其状态会相应地改变。具体的处理策略可以根据异常的类型、任务的当前状态以及期望的后续状态来确定。</p> <h4 id="流程级别的异常处理"><a href="#流程级别的异常处理" class="header-anchor">#</a> 流程级别的异常处理</h4> <p>异常发生时，可能影响同一流程实例中的其他任务。因此，在流程级别上处理异常时，需要考虑以下三种可能的选择：</p> <ul><li>继续当前流程实例：可以继续工作流实例，在任何其他任务的执行中不发生干预。</li> <li>删除当前流程实例：删除当前流程实例中所有剩余任务。</li> <li>删除所有流程实例：删除所有其他执行中的使用相同流程模型的流程实例下的剩余任务。</li></ul> <p>在后两种情况下，可以根据与相应任务定义相关的静态设计时间信息（例如任务类型、资源需求等）以及相关的运行时信息（例如实际分配给的资源、开始时间等）来指定要删除的任务的选择。</p> <h3 id="_2、异常的检测"><a href="#_2、异常的检测" class="header-anchor">#</a> 2、异常的检测</h3> <p>通常，将在当前正在执行的任务的上下文中检测到特定异常的发生。</p> <h3 id="_3、异常的处理策略"><a href="#_3、异常的处理策略" class="header-anchor">#</a> 3、异常的处理策略</h3> <p>在业务流程管理（BPM）中，对异常情况的处理至关重要。以下是一些常用的异常处理方法：</p> <ul><li><p>不操作：检测到异常以后，忽略跳过，继续执行下一步任务。</p></li> <li><p>抛异常：在一个子流程中捕获异常，并在父流程中再次抛出。或者在任务中抛出异常，让全局异常捕获处理。</p></li> <li><p>默认异常处理器：为工作流定义一个默认的异常处理程序，当发生未被特定处理程序捕获的异常时，由默认处理程序进行处理。</p></li> <li><p>取消任务：当发生异常时，取消当前正在执行的任务实例。</p></li> <li><p>取消流程：当发生严重的异常时，取消整个工作流实例。</p></li> <li><p>人工干预：当检测到异常时，可以通知相关人员进行人工干预。人工干预可以快速解决问题，但可能需要较高的人力成本。例如在一个电商订单处理流程中，当订单支付状态异常时，流程自动通知客服人员检查并处理异常订单。</p></li> <li><p>自动重试：对于某些可恢复的异常，可以尝试自动重试。例如，当网络连接失败时，可以等待一段时间后再次尝试。自动重试可以降低人工干预的成本，但可能无法解决所有异常。例如在一个数据同步流程中，当网络连接失败导致数据同步异常时，系统等待一段时间后自动尝试重新同步数据。</p></li> <li><p>补偿：发生异常时，执行一些操作来抵消之前的活动，这通常用于处理业务逻辑错误。例如在一个库存管理系统中，当发现商品入库数量异常时，系统自动回滚到入库操作之前的状态，并通知相关人员进行核查。</p></li> <li><p>恢复：在异常被处理后，恢复被暂停的工作流实例。</p></li> <li><p>重新执行：在异常被处理后，重新执行导致异常的活动。</p></li></ul> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <h3 id="数据库中的事务"><a href="#数据库中的事务" class="header-anchor">#</a> 数据库中的事务</h3> <p>在计算机科学和数据库管理中，事务（Transaction）是一组数据库操作，被视为一个不可分割的工作单位。事务包含了一个或多个数据库操作（例如插入、更新、删除等），这些操作要么全部执行成功，要么全部不执行，没有中间状态。事务确保数据库从一个一致的状态转移到另一个一致的状态。</p> <p>事务通常满足以下四个属性，通常被称为ACID属性：</p> <ol><li><strong>原子性（Atomicity）：</strong> 事务是一个原子操作，要么全部执行成功，要么全部失败回滚，没有中间状态。</li> <li><strong>一致性（Consistency）：</strong> 事务开始前和结束后，数据库必须保持一致状态。这意味着事务执行后，数据库中的数据应该满足一定的约束，不破坏事务前的一致性。</li> <li><strong>隔离性（Isolation）：</strong> 多个事务并发执行时，每个事务的执行都应该与其他事务隔离，一个事务的执行不应影响其他事务的执行。这保证了在并发环境下数据库的一致性。</li> <li><strong>持久性（Durability）：</strong> 一旦事务完成（提交），其结果应该被永久保存在数据库中，即使系统发生故障，也不应该丢失已提交的事务。</li></ol> <p>事务的典型应用场景包括金融系统、库存管理、在线购物等需要确保数据完整性和一致性的领域。在数据库管理系统中，使用事务可以防止数据损坏、确保数据的正确性，以及支持并发控制。</p> <p>事务是数据库系统中保持数据一致性的机制，它要么完全执行，要么完全不执行。在事务中，通常涉及一系列的操作，这些操作要么全部成功提交，要么全部回滚。本地事务和分布式事务是两种不同的事务模型，分别应用于单一数据库系统和分布在多个数据库系统之间的情境。</p> <h4 id="本地事务"><a href="#本地事务" class="header-anchor">#</a> 本地事务</h4> <ul><li><p><strong>定义：</strong> 本地事务是在单一数据库中执行的事务，它仅涉及到该数据库内的数据和操作。</p></li> <li><p><strong>特点：</strong></p> <ul><li>所有事务操作在同一数据库中完成。</li> <li>通常使用数据库提供的事务管理机制，如SQL中的<code>BEGIN TRANSACTION</code>、<code>COMMIT</code>和<code>ROLLBACK</code>。</li> <li>数据库系统负责管理事务的隔离性、一致性、持久性和原子性。</li></ul></li> <li><p><strong>示例：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token comment">-- 开始一个事务</span>
 <span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
 
 <span class="token comment">-- 在事务中执行一些操作</span>
 <span class="token keyword">UPDATE</span> 表名 <span class="token keyword">SET</span> 列名 <span class="token operator">=</span> 新值 <span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span>
 <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> 表名 <span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span>
 
 <span class="token comment">-- 检查是否有错误</span>
 <span class="token keyword">IF</span> 错误条件 <span class="token keyword">THEN</span>
     <span class="token comment">-- 发生错误，回滚事务</span>
     <span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
 <span class="token keyword">ELSE</span>
     <span class="token comment">-- 没有错误，提交事务</span>
     <span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
 <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
 
</code></pre></div><p>在上述例子中，<code>BEGIN TRANSACTION</code> 标志着事务的开始，接着执行了一些更新和删除操作。在检查错误条件后，如果发现错误，就执行 <code>ROLLBACK</code> 操作来撤销之前的所有操作。如果没有错误，则执行 <code>COMMIT</code> 操作来确认事务，使之前的操作生效。</p> <p>使用回滚操作是事务处理的关键部分，它确保了数据库的一致性，即使在操作过程中发生了错误</p></li></ul> <h4 id="分布式事务"><a href="#分布式事务" class="header-anchor">#</a> 分布式事务</h4> <ul><li><strong>定义：</strong> 分布式事务是在分布在多个数据库系统之间执行的事务，它可能涉及到多个独立的、相互协作的数据库系统。</li> <li><strong>特点：</strong> <ul><li>事务涉及多个数据库，可能分布在不同的物理位置。</li> <li>通常需要采用分布式事务协议来确保事务的 ACID（原子性、一致性、隔离性、持久性）特性。</li> <li>常见的分布式事务协议包括两阶段提交（2PC）、三阶段提交（3PC）等。</li></ul></li> <li><strong>示例：</strong> <ul><li>在一个分布式系统中，用户的操作可能跨越多个服务或数据库。例如，一个电子商务系统的订单支付操作可能涉及到用户账户服务、库存服务、支付服务等。</li></ul></li></ul> <p>两者的主要区别：</p> <ol><li><strong>范围：</strong> <ul><li>本地事务仅涉及单一数据库，所有操作在同一数据库事务中执行。</li> <li>分布式事务涉及多个数据库，可能分布在不同的物理位置。</li></ul></li> <li><strong>协调机制：</strong> <ul><li>本地事务使用数据库提供的本地事务管理机制。</li> <li>分布式事务通常需要使用专门的分布式事务协议，如两阶段提交。</li></ul></li> <li><strong>隔离性：</strong> <ul><li>本地事务在同一数据库中操作，隔离性由数据库管理。</li> <li>分布式事务需要额外的机制来确保在多个数据库之间的隔离性。</li></ul></li> <li><strong>复杂性：</strong> <ul><li>本地事务相对简单，仅涉及单一数据库的事务管理。</li> <li>分布式事务的实现较为复杂，需要考虑多个参与者的协调和通信，以确保事务的一致性。</li></ul></li></ol> <h3 id="业务流程中的事务"><a href="#业务流程中的事务" class="header-anchor">#</a> 业务流程中的事务</h3> <p>在业务流程中，&quot;事务&quot; 一词的含义可能与数据库管理系统中的事务略有不同。在业务流程中，事务通常指的是一系列有序的、相关的业务操作，这些操作一起完成特定的业务目标。业务流程中的事务可以涵盖多个步骤和活动，旨在实现一个完整的业务功能。</p> <p>这里的 &quot;事务&quot; 可能包括一系列业务活动，如填写表单、审批流程、数据处理、通知等。这些活动按照特定的顺序和规则组织在一起，形成一个事务单元，目的是完成一个特定的业务任务或满足特定的业务需求。</p> <p>举例来说，考虑一个简单的采购流程：</p> <ol><li><strong>提交采购申请：</strong> 员工填写采购申请表单，描述所需的物品和数量。</li> <li><strong>审批流程：</strong> 申请表单被提交给上级或相关审批人员进行批准。</li> <li><strong>采购订单生成：</strong> 一旦获得批准，系统生成采购订单。</li> <li><strong>物品采购：</strong> 采购部门根据订单购买所需物品。</li> <li><strong>入库：</strong> 收到物品后，进行入库操作。</li> <li><strong>付款：</strong> 生成付款单并完成付款。</li></ol> <p>整个采购过程就是一个业务流程事务，包括了多个步骤，每个步骤都有其特定的任务和条件。在这个业务流程中，每个步骤的成功完成都依赖于前一个步骤的成功完成。如果其中任何一步失败，整个事务可能被中断或需要回滚到之前的状态。这也是异常处理需要考虑的问题，也是最复杂的地方，因为这事务中的任务可能涉及多个不同的系统。</p> <h2 id="补偿"><a href="#补偿" class="header-anchor">#</a> 补偿</h2> <p>补偿机制是一种用于处理事务执行中出现异常或错误的机制，以确保业务流程的一致性和完整性。当某个任务或步骤发生故障时，补偿机制会触发一系列的补偿操作，这些操作的目的是撤销或修复已经执行的任务，将系统状态恢复到正常状态。</p> <p>以下是补偿机制的一般性特征和步骤：</p> <h3 id="特性和步骤"><a href="#特性和步骤" class="header-anchor">#</a> 特性和步骤</h3> <ul><li><p><strong>定义补偿任务：</strong> 在业务流程的某个节点或任务中，定义一个补偿任务。这个任务描述了在发生异常情况时应该执行的操作。</p></li> <li><p><strong>关联补偿任务：</strong> 将补偿任务与可能引发异常的任务相关联。</p></li> <li><p><strong>触发补偿机制：</strong> 当流程执行中发生异常时，系统将触发与异常相关联的补偿任务。异常可以是由于外部系统故障、超时、无效数据等原因引起的。</p></li> <li><p><strong>执行补偿操作：</strong> 补偿任务的执行会导致一系列的补偿操作，这些操作的目的是撤销或修复之前已经执行的任务，以保持系统的一致性。</p></li> <li><p><strong>事务回滚：</strong> 在某些情况下，补偿机制可能需要执行事务回滚，以确保所有相关的操作都能被撤销。这通常要求支持事务的系统。</p></li></ul> <h3 id="补偿机制示例"><a href="#补偿机制示例" class="header-anchor">#</a> 补偿机制示例</h3> <p>考虑一个简单的采购流程：</p> <ol><li><strong>提交采购请求任务：</strong> 员工提交采购请求。</li> <li><strong>扣除库存任务：</strong> 扣除相应产品的库存。</li> <li><strong>支付任务：</strong> 完成支付。</li> <li><strong>关联补偿任务：</strong> 在支付任务中，关联一个补偿任务，例如，如果支付失败，执行补偿操作。</li> <li><strong>触发补偿机制：</strong> 如果支付失败，系统触发与支付任务关联的补偿任务。</li> <li><strong>执行补偿操作：</strong> 补偿任务可能包括撤销库存扣除操作，以保持一致性。</li></ol> <p>这个例子中的补偿机制保证了在支付任务失败时，库存的扣除操作能够被正确地撤销，确保系统的一致性。</p> <h2 id="编程中的异常处理"><a href="#编程中的异常处理" class="header-anchor">#</a> 编程中的异常处理</h2> <p>异常处理机制落到底层其实就是通过代码来实现。所以，编程语言中的异常处理机制是可以借鉴过来使用的。</p> <p>下面用python语言举例。</p> <p>Python的异常处理机制是通过使用 try-except 语句来实现的。当程序运行到 try 代码块中，如果发生异常，Python会跳到 except 代码块中执行相应的处理。如果没有发生异常，Python会跳过 except 代码块，继续执行后续的代码。除此之外，还可以使用 finally 代码块，无论是否发生异常，finally 代码块中的代码都会被执行。</p> <p>所以，一个标准的Python异常处理通常包括以下几个部分：</p> <ol><li>try 代码块：放置可能发生异常的代码，一般是业务代码。</li> <li>except 代码块：处理特定异常的代码。</li> <li>finally 代码块（可选）：无论是否发生异常，都会执行的代码。</li></ol> <p>在实际写代码时，我们会区分全局异常和局部异常的处理。</p> <p>全局异常处理是指在程序的最顶层（通常是主函数）设置一个<code>try/except</code>块来捕获所有可能出现的异常。这样做的好处是可以确保程序在出现异常时不会立即崩溃，而是会执行一些清理工作，然后优雅地退出。</p> <p>局部异常处理是指在可能引发特定异常的代码附近设置<code>try/except</code>块。这样做的好处是可以针对不同的异常类型提供不同的处理逻辑。</p> <p>下面举例说明一个简单的异常处理：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 全局异常处理</span>
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 这里是可能引发异常的代码</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>divide<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：Error: Division by zero.</span>
				<span class="token keyword">print</span><span class="token punctuation">(</span>divide<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：Error: Invalid input type. Both x and y should be numbers.</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Caught an exception: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token comment"># 这里是处理异常的代码，比如清理资源、记录错误日志等</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 局部异常处理</span>
<span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> x <span class="token operator">/</span> y
    <span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Error: Division by zero.&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    <span class="token keyword">except</span> TypeError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Error: Invalid input type. Both x and y should be numbers.&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> result

</code></pre></div><p>在上述代码中，我们展示了Python中全局和局部异常处理的实现方式。</p> <ol><li>在全局异常处理的例子中，我们定义了一个名为<code>main</code>的函数，该函数中的代码被放在一个<code>try</code>块中。这意味着如果这些代码中的任何一行引发了异常，Python将立即跳到<code>except</code>块。在这个例子中，我们尝试执行<code>divide(1, 0)</code>，这将引发<code>ZeroDivisionError</code>异常，因为我们不能除以零。当这个异常被引发时，Python立即跳到<code>except</code>块，并打印出异常的信息。</li> <li>在局部异常处理的例子中，我们定义了一个名为<code>divide</code>的函数，该函数接受两个参数<code>x</code>和<code>y</code>，并尝试返回<code>x</code>除以<code>y</code>的结果。在这个函数中，我们使用了两个<code>except</code>块来分别处理<code>ZeroDivisionError</code>和<code>TypeError</code>异常。如果<code>y</code>为零，将引发<code>ZeroDivisionError</code>异常，我们打印出错误信息并返回<code>None</code>。如果<code>x</code>或<code>y</code>不是数字，将引发<code>TypeError</code>异常，我们同样打印出错误信息并返回<code>None</code>。</li></ol> <h2 id="异常处理机制的实现"><a href="#异常处理机制的实现" class="header-anchor">#</a> 异常处理机制的实现</h2> <p>前面，我们把异常区分成全局和局部两种实现方式，局部的是各个任务节点自己实现处理的，而全局则是兜底处理那些任务节点遗漏未处理的异常。</p> <p>在第三节中，我们定义了各个任务节点的JSON结构模型，其中的errorHandler就是设置异常处理相关的配置。</p> <img src="/assets/img/3 异常处理机制实现.b18a91c4.png" alt="image-20231218203916147" style="zoom:50%;"> <h3 id="局部异常处理"><a href="#局部异常处理" class="header-anchor">#</a> 局部异常处理</h3> <blockquote><p>异常处理方式</p></blockquote> <p>如下所示，局部异常处理有4种方式：</p> <ul><li>重试（retry）：可以设置retryCount重试次数、retryInterval重试间隔（单位：秒）。</li> <li>忽略（ignore）：忽略异常的发生，什么也不做，继续执行下一个任务节点。</li> <li>抛出异常（throwException）：当认为任务节点发生异常时不适合处理，可以统一向上抛出异常，让全局异常捕获处理。</li> <li>捕获（catch）：可以设置异常处理的分支（exceptionBranch），在这个分支里，可以设置做异常的回滚、补偿以及接入人工干预流程等操作。</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;operation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;retry/ignore/throwException/catch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;retryCount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;retryInterval&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;exceptionBranch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;exceptionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;abort/timeout/resource unaviable/constraint/unknown&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;exceptionMsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;异常详情&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>要捕获的异常类型（exceptionType）如前面介绍的：</p> <ul><li>abort：外部任务执行异常</li> <li>timeout：执行超时异常</li> <li>resource unaviable：资源不可用异常</li> <li>constraint：不满足任务或流程的一些约束规则异常</li> <li>unknown：一些意料之外的异常</li></ul> <p>exceptionMsg字段会把异常的内容返回，便于后续的异常分支可以获取做判断分析。</p> <h3 id="全局异常处理"><a href="#全局异常处理" class="header-anchor">#</a> 全局异常处理</h3> <p>如果出现一些任务节点抛出异常或者预料之外的异常，则全局异常处理需要进行捕获响应处理。</p> <p>在实现上，可以定义一个全局异常捕获节点，一旦流程中添加了这个全局异常捕获节点，则引擎就需要去监控全局异常并响应。</p> <p>一旦捕获到任务节点未处理的异常，就可以捕获到类似如下JSON数据，可以知道发生异常的任务节点、异常的信息等信息。下面这些信息作为这个【全局异常捕获节点】的输出。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;createAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-12-18T20:26:52.001582519+08:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;Name\&quot;:\&quot;test\&quot;,\&quot;Content\&quot;:\&quot;throw error\&quot;}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorAppInstId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v3g1sjx7pk&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorAppName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Throw Exception&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;executionUid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023511736724707847770112&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;workflowId&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token property">&quot;workflowName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;【DEMO】Error handler&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上述实现方式的好处是，正常的业务流程不会混杂太多异常的处理过程，如果想保持业务流程的清晰，可以统一放到全局处理流程上处理。可以把异常处理的逻辑从业务逻辑中剥离出来，单独成一个流程，甚至可以传递给子流程去响应处理。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">9/22/2024, 10:43:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/4.5-数据管理机制-数据模式.html" class="prev">
        4.5 数据管理机制-数据模式
      </a></span> <span class="next"><a href="/4.7-引擎执行模式.html">
        4.7 引擎执行模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b8820ad2.js" defer></script><script src="/assets/js/2.a6c4a04f.js" defer></script><script src="/assets/js/1.04b49174.js" defer></script><script src="/assets/js/37.ac210fe0.js" defer></script>
  </body>
</html>
