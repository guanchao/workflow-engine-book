(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{284:function(t,s,a){t.exports=a.p+"assets/img/3 流程的生命周期.cdbfc72f.png"},285:function(t,s,a){t.exports=a.p+"assets/img/3 任务的生命周期.457a4900.png"},424:function(t,s,a){t.exports=a.p+"assets/img/3.2 bpmn-events.1f2161db.png"},425:function(t,s){t.exports="data:image/png;base64,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"},426:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wkXBRA2H2mL+AAAAAd0RVh0QXV0aG9yAKmuzEgAAAAMdEVYdERlc2NyaXB0aW9uABMJISMAAAAKdEVYdENvcHlyaWdodACsD8w6AAAADnRFWHRDcmVhdGlvbiB0aW1lADX3DwkAAAAJdEVYdFNvZnR3YXJlAF1w/zoAAAALdEVYdERpc2NsYWltZXIAt8C0jwAAAAh0RVh0V2FybmluZwDAG+aHAAAAB3RFWHRTb3VyY2UA9f+D6wAAAAh0RVh0Q29tbWVudAD2zJa/AAAABnRFWHRUaXRsZQCo7tInAAAClElEQVQ4ja3UT0iTYQDH8a+vDlFIy6GBm6N6DQqrJWxvZXSptl4vIbwSpUXQIVkdKkoPUdKhwhTKLqmH0KUolqtAoc11iMI/LV0tssCUajkjbJYFSX/06RCZ5h8w970+vB+e5/D+EDM0Ln6Ke/4mceikJtZYTSLFkCAAkWJIFGZlpTh+qkA8fuKf6VMhhBBRQgjBpLp7PRQWFfKs6zVq3lqy1HSWpiWSbFjEUOgL79+O0O7uw1Pfg6JYKS+rRJblyQSTUIGz5RzHDpSw5+gGch1WdLHRzNaPb2M0VTyi8bKfOmc9qpo9Ha1pPsuJgxc416CRoRhmxf6txxeiOK+Zmqt1ZGdn/0W7ez3Yt2icb8ydFzgZPr27hY62h8iyTNS4+Cm25WSyWklmz9GN8wb/dKP8KQPdOlyum0j3H9/muf8NuQ7rf4MAOY4MfF2dBAIBouP1Y2eMq+JQbCsWhEbHSIx+iCX4Moz04G4Xm9T0BYF/UtQ0vF4v0ru3w6QuXxIRNGVZLMFgEGlkeJREfVxE0ER9POFwGGlxUjwj4dGIoF+HJfR6PVKqaSmDrz5GBB1+HYXJZELabttKh7svIqjPE8RmsyHtzS3g7vUX/Pg2tiBQ+p7ArQYvmqYhrTdnYrFYaKp4tCDUWzWExWLBbDYTA1BeVsnGzVbWZaX9178/5E+m4lIJbW1tv28NIMsy16rrKM5rpscXmjd4eFcp1dXVE7s6ZaTdbjf79ueTdySLHEfGnHsqfU/AWzXElYu1OJ1OVFWdOJu2/P39/RQVFdLpa2dnfhbKDiNJRh0phgQ+DY7zOaSj0xOkqfYOiqJQWlo61/JPLRAI4HK5aG1tJRQKMTAwgNFoxGAwYLfb0TQNs9k84yt+Ac1RMTuHwJIUAAAAAElFTkSuQmCC"},427:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAA2CAYAAAC8yXv8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wkXBREDUMF+mgAAAAd0RVh0QXV0aG9yAKmuzEgAAAAMdEVYdERlc2NyaXB0aW9uABMJISMAAAAKdEVYdENvcHlyaWdodACsD8w6AAAADnRFWHRDcmVhdGlvbiB0aW1lADX3DwkAAAAJdEVYdFNvZnR3YXJlAF1w/zoAAAALdEVYdERpc2NsYWltZXIAt8C0jwAAAAh0RVh0V2FybmluZwDAG+aHAAAAB3RFWHRTb3VyY2UA9f+D6wAAAAh0RVh0Q29tbWVudAD2zJa/AAAABnRFWHRUaXRsZQCo7tInAAAFLElEQVRogdXZX0hbVxwH8O9VMQ/FUp3LbMRamrUqyMSHUu2w16qdNEUUBwqtbd3LxIIMqkVFH/SltGT2YaOVxcAwrGxR6h7mU6kmkZGADFFalrIWxPoPfYgttVUb0+8e3NXFmpg/J8Z+IS+55JdPwj3nnvM7YARiNVxn2meJtFqtwmtDdEGr4TrVCXHUf32Y6qQE4WihYAVrbdSSP31Ba6NWOFoYeDtWeYlGx0BAbD2NqGr8AX3fpkM+ccDrmnziAPq+UaOqsgw2my3s7wob7A+rRCQ6LHAgWCWi0CGDg8EqEYEOCRwKVkm46KDB4WCVhIMOCiwCqyRUdMBgkVgloaADAkcCqyRY9K7gSGKVBIP2C94LrJJA0T7Be4lVEgh6R3A0sEp2Q38AjiZWiT+0F3g/YJX4Qm+C9xNWyU5oiSQBIP3wJ2j4UoWmrz6NKnKnfP/35/jx978wNTW19Q+bfhuA3rIM2z9vomn7IDapBPpf/4TJZALwv1tClmX0DfyBqp8X9w3aJpWgqv0X9PX1QZZlANsG3X5C74QFdpjW9gPaFxbw8eCIJtofFvDzaI4GejcssMviZy/RgWCBAJaXe4EOFAsEuICPJDoYLBDEFikS6GCxQJCbUJHoULBACNt8EehQsUCIjZRw0OFggTBaVaGgw8UCYTYDg0GLwAIC2q2BoEVhAUBcB95q3ei0b+/AG65TrVYL68CLPePYhhaNJSNxivQfWv9dpXAsGQEwuYFOS0uLyDnd5ib0Y4mQU6S9zMcJdrvd6OjogFarhUqlwrFjx6DX63f98Nu3b1FbWxtpo3dI8vLlyzx79izHxsa4vLxMu93OzMxMGo1GvwNgfn6eWq1W+MDyFzx79oyJiYl8+fKl1wW73c779++TJF+9esWysjImJyczPj6eBQUFXFpaYk5ODgEwIyODJHnnzh1qNBomJyfzxo0bfP/+PbOzs/n06VOS5KVLl3jt2jWSpMPhoE6n81m7pqaGBoNh01NcXEy73U6YTCbqdDq/v2pmZobDw8NcW1ujy+Vifn4++/v7vf5hi8XC4uJizs3N0eVysbKykr29vWxubmZ3dzdJMjc3lzk5OSTJzs5O3rt3z2ft4eFhyrJMklxcXOTx48dJkjEkIUnS5i1y69YtSJIESZJw9OhRAEBqaio8Hg/a29tx5coVPHnyBOvr61631qNHjzA0NASNRoOkpCQMDAxgZGQEOp0OFosFz58/R2ZmJt69e4elpSU8fPgQFy5c8Fm7sLAQs7OzmJ6exoMHD1BdXQ0AiDl58iQcDgfevNlYuLS0tIAknE7nJsZsNqO+vh5qtRr19fU4derUB2PB4/Ggo6MD3HgYgSSMRiNOnz6N8fFxWCwWFBYW4syZMxgcHMTq6iqOHDnis7YkSbh69SrMZjPMZjMuXry4Ac7KysL58+dRUVGBiYkJrK6uwul0wmAwQKVSAQBGR0dRUlKChoYGAIDD4cDa2hpiY2OxsrKClZUVFBUVoaenB48fP8b8/Dx0Oh3u3r2LuLg45ObmoqurC7Is49y5c2hra0Npaanf2gBQW1sLo9GI169fIysra2uWcLvdvHnzJjMyMhgfH0+NRsO6ujq+ePGCJOl0Opmdnc2EhASWl5ezqamJra2t9Hg8zMvLY3p6Okny9u3bTE1N5cGDB1lXV8f19XWSpMlkYkpKCknS5XIxJiaGdrvdb20lBQUF7Orq2pol/I62KMbtdnNycpIpKSlcWFjYfH/fgvv7+3no0CGvqY0k/wUNEMZr7VvDOwAAAABJRU5ErkJggg=="},428:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAJCAYAAABt/EFEAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wkXBREU0xL7XQAAAAd0RVh0QXV0aG9yAKmuzEgAAAAMdEVYdERlc2NyaXB0aW9uABMJISMAAAAKdEVYdENvcHlyaWdodACsD8w6AAAADnRFWHRDcmVhdGlvbiB0aW1lADX3DwkAAAAJdEVYdFNvZnR3YXJlAF1w/zoAAAALdEVYdERpc2NsYWltZXIAt8C0jwAAAAh0RVh0V2FybmluZwDAG+aHAAAAB3RFWHRTb3VyY2UA9f+D6wAAAAh0RVh0Q29tbWVudAD2zJa/AAAABnRFWHRUaXRsZQCo7tInAAAA1klEQVRIieWTIQ6DQBREZ5cmiwIEAkeQewT8Ki5AgkeA4xxcBo3gEis4BAKLmwpKmjZtHZDQl3zx85+YzGbBC6OUojGG1tqfHg7KcwoACICO41Brza7rPnsH5zqUrYRtpJQMw5Bt23JZlqd3YsbdeS9hGyEEXddlWZacponicfhbgiDAbS3smgghXnbP82CMwTzPGMcRdV2jqioIXriFrYQ4jpGmKay1kFKiaRoURQGl1Cqe/G13BQDzPGcURcyyjH3ff/Ru573T/iRJAt/3MQwDtNZfvTvngN/e1HLDrAAAAABJRU5ErkJggg=="},643:function(t,s,a){"use strict";a.r(s);var r=a(14),n=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("流程建模这部分内容，我会从流程定义、事件节点定义、任务节点定义和网关节点定义四大部分来展开介绍。让你了解如何设计一个流程建模语言，包括工作流的定义、节点的定义和分类（事件、任务和网关）、运行时数据的定义以及事件类型定义；")]),t._v(" "),s("p",[t._v("流程定义这一节内容，主要介绍工作流、节点和运行时数据的JSON结构怎么设计。")]),t._v(" "),s("h2",{attrs:{id:"流程定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程定义"}},[t._v("#")]),t._v(" 流程定义")]),t._v(" "),s("p",[t._v("传统BPMN采用XML的语言来定义流程，虽然描述很完整，但是其描述复杂，比较难上手理解。")]),t._v(" "),s("p",[t._v("区别于传统做法，我们采用Json这种互联网上更通用的格式来定义流程，这种数据格式在系统之间也更容易传递交互、更容易理解。")]),t._v(" "),s("p",[t._v("如下是，一个完整的工作流定义。")]),t._v(" "),s("p",[t._v("需要注意，workflow流程定义是一个静态数据，其运行时的数据execution，即流程实例则是动态数据。一个流程（workflow）被执行时，会产生流程实例（execution），这个流程实例也会包含流程定义的结构，同时也包含此次运行时的数据，他们是一对多的关系。")]),t._v(" "),s("p",[t._v("以下数据工作流定义的字段结构：")]),t._v(" "),s("h2",{attrs:{id:"workflow定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#workflow定义"}},[t._v("#")]),t._v(" workflow定义")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("是否必须")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id")]),t._v(" "),s("td",[t._v("工作流ID，唯一标识工作流的身份")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("name")]),t._v(" "),s("td",[t._v("工作流名称")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("description")]),t._v(" "),s("td",[t._v("工作流描述")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("工作流版本")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("startTaskInstId")]),t._v(" "),s("td",[t._v("工作流开始运行的节点。默认为空，表示从流程实例的节点开始运行。")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("endTaskInstId")]),t._v(" "),s("td",[t._v("工作流运行结束时的节点。默认为空，表示运行到流程实例结束为止。")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("engine")]),t._v(" "),s("td",[t._v("引擎类型，支持：快速模式(fast)、标准模式(standard)，默认是标准模式。两者区别见《引擎执行模式》一节内容。")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("status")]),t._v(" "),s("td",[t._v("工作流状态，状态轮转见后面内容。")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("creator")]),t._v(" "),s("td",[t._v("工作流创建人")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("executor")]),t._v(" "),s("td",[t._v("工作流执行触发人")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("timeout")]),t._v(" "),s("td",[t._v("工作流执行的超时时间，默认为0表示没有时间限制。")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("inputDataSchema")]),t._v(" "),s("td",[t._v("声明和验证工作流的输入数据。")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("outputDataSchema")]),t._v(" "),s("td",[t._v("声明和验证工作流的输出数据")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("error")]),t._v(" "),s("td",[t._v("工作流执行的错误信息")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("extension")]),t._v(" "),s("td",[t._v("扩展字段可以用来设置并发限制等附加信息，以此来增强工作流的定义")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("metadata")]),t._v(" "),s("td",[t._v("元数据主要用来存储工作流核心定义之外的信息，例如作者邮件、环境信息、分类等")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("nodes")]),t._v(" "),s("td",[t._v("node节点数组")]),t._v(" "),s("td",[t._v("是")])])])]),t._v(" "),s("p",[t._v("其Json结构参考如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1541815603606036480"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Unknown"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"startTaskInstId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endTaskInstId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"engine"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fast"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"creator"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"executor"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"inputDataSchema"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"string_value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"min"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"outputDataSchema"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"string_value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"min"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extension"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rateLimit"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"metadata"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx@qq.com"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nodes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"instId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"脚本任务执行"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"task"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"执行脚本任务"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"positions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"connections"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameters"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"代码"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"errorHandler"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"loopHandler"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"isIgnore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"runtimes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"startAt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1700063265000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endAt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1700063307000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"done"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"output"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("各个属性介绍如下：")]),t._v(" "),s("blockquote",[s("p",[t._v("id")])]),t._v(" "),s("p",[t._v("工作流的ID，可以使用数据库的自增长生成的唯一ID，也可以使用类似UUID算法或者twitter的雪花算法生成唯一的ID。")]),t._v(" "),s("blockquote",[s("p",[t._v("name")])]),t._v(" "),s("p",[t._v("工作流名称。")]),t._v(" "),s("blockquote",[s("p",[t._v("description")])]),t._v(" "),s("p",[t._v("可用于提供有关工作流的更多信息。")]),t._v(" "),s("blockquote",[s("p",[t._v("version")])]),t._v(" "),s("p",[t._v("可以指定工作流的具体版本，版本格式采用通用的格式：主版本号.次版本号.修订号，版本号递增规则如下：。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("主版本号：当出现不兼容的大版本变动")])]),t._v(" "),s("li",[s("p",[t._v("次版本号：当做了向下兼容的功能性新增")])]),t._v(" "),s("li",[s("p",[t._v("修订号：当做了向下兼容的问题修正")])])]),t._v(" "),s("blockquote",[s("p",[t._v("startTaskInstId")])]),t._v(" "),s("p",[t._v("指定工作流执行时起始运行节点，默认情况下为空表示由默认的起始节点开始。")]),t._v(" "),s("blockquote",[s("p",[t._v("endTaskInstId")])]),t._v(" "),s("p",[t._v("指定工作流执行的终止节点，即执行到该节点，则停止执行。")]),t._v(" "),s("blockquote",[s("p",[t._v("engine")])]),t._v(" "),s("p",[t._v("工作流运行时选择使用的引擎类型，分别有快速模式和标准模式。两种模式执行有区别，快速模式适合执行时间短、运行速度快、任务量大的业务流程，例如API服务等。标准模式适合长时间运行的业务流程，例如审批等。两者的具体在下一章会详细介绍。")]),t._v(" "),s("blockquote",[s("p",[t._v("status")])]),t._v(" "),s("p",[t._v("表示工作流的运行状态，详细见下一章流程实例生命周期介绍：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(284),alt:"image-20240304094655399"}}),t._v(" "),s("blockquote",[s("p",[t._v("creator")])]),t._v(" "),s("p",[t._v("表示工作流的创建人。")]),t._v(" "),s("blockquote",[s("p",[t._v("executor")])]),t._v(" "),s("p",[t._v("表示触发工作流执行的人，例如在表单提交时可以通过登录态获取提交表单的用户，默认则是工作流创建人。")]),t._v(" "),s("blockquote",[s("p",[t._v("timeout")])]),t._v(" "),s("p",[t._v("指定工作流运行的最长时间，超过该时间后，引擎会强制终止流程中所有运行中的任务实例，并将status字段设置为已停止状态。")]),t._v(" "),s("blockquote",[s("p",[t._v("inputDataSchema")])]),t._v(" "),s("p",[t._v("用于声明和验证工作流接收的参数类型，如果不符合声明的要求，则无法触发工作流运行。其格式参考如下。")]),t._v(" "),s("p",[t._v("主要定义输入参数的类型，包括基本的字符串（string）、整数（integer）、浮点数（float）、布尔值（boolean），以及默认值、是否必填等校验信息。这样可以在触发工作流运行之前，检查输入参数是否符合要求。这个在设计API类型的工作流时用的最多。例如下面的例子：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input_string_value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"min"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input_integer_value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"min"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input_float_value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"min"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input_boolean_value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"boolean"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("outputDataSchema")])]),t._v(" "),s("p",[t._v("功能跟inputDataSchema类型，主要用于声明校验工作流的输出结果。如果不符合声明的要求，则会导致报错信息（存储在error字段），并修改status状态为错误。")]),t._v(" "),s("blockquote",[s("p",[t._v("error")])]),t._v(" "),s("p",[t._v("记录工作流在运行时发生异常的错误信息，可用于排查故障。")]),t._v(" "),s("blockquote",[s("p",[t._v("extension")])]),t._v(" "),s("p",[t._v("该属性用于增强扩充工作流功能的定义，例如设置工作流的并发度，或者设置工作流的运行KPI指标等信息。")]),t._v(" "),s("p",[t._v("例如下面定义了每秒钟该工作流同时能触发运行的工作流实例个数，类似于API限频控制每秒并发数。")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rateLimit"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("metadata")])]),t._v(" "),s("p",[t._v("该属性存储一些工作流的元数据，这些元数据不影响工作流的运行，例如工作流创建者的联系方式等信息。")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{"email":"xxx@qq.com"}\n')])])]),s("h2",{attrs:{id:"node节点定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node节点定义"}},[t._v("#")]),t._v(" node节点定义")]),t._v(" "),s("p",[t._v("如下图所示，是BPMN建模语言中包含的各种基础元素，包括任务、事件以及网关元素。BPMN建模语言虽然描述的元素非常丰富全面，但我们在实际的使用过程中，发现绝大部分元素是几乎用不到的。本着二八原则和实用角度出发，我们对BPMN的任务、事件和网关元素进行了精简，剥离出使用最频繁的元素进行定义总结。")]),t._v(" "),s("img",{staticStyle:{zoom:"150%"},attrs:{src:a(424)}}),t._v(" "),s("p",[t._v("下面构成一个流程的四个基础元素：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("元素")])]),t._v(" "),s("th",[s("strong",[t._v("符号")])]),t._v(" "),s("th",[s("strong",[t._v("描述")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("任务（Task）")]),t._v(" "),s("td",[s("img",{attrs:{src:a(425),alt:"BPMN symbol - Task"}})]),t._v(" "),s("td",[t._v("流程中执行具体任务的节点")])]),t._v(" "),s("tr",[s("td",[t._v("事件（Event）")]),t._v(" "),s("td",[s("img",{staticStyle:{zoom:"150%"},attrs:{src:a(426),alt:"BPMN symbol - Start event"}})]),t._v(" "),s("td",[t._v("在流程实例运行过程中发生的事件，例如开始、结束等")])]),t._v(" "),s("tr",[s("td",[t._v("网关（Gateway）")]),t._v(" "),s("td",[s("img",{staticStyle:{zoom:"150%"},attrs:{src:a(427),alt:"BPMN symbol - symbol"}})]),t._v(" "),s("td",[t._v("控制流程的数据流转和路由决策方向")])]),t._v(" "),s("tr",[s("td",[t._v("箭头（Flow）")]),t._v(" "),s("td",[s("img",{staticStyle:{zoom:"150%"},attrs:{src:a(428),alt:"BPMN symbol - flow"}})]),t._v(" "),s("td",[t._v("箭头用于说明节点之间的流向以及依赖关系，这里直接用connections定义")])])])]),t._v(" "),s("p",[t._v("下面是节点的各字段定义：")]),t._v(" "),s("p",[t._v("备注：在这里，我们把前面任务、事件和网关三个基础元素都统一用node节点来定义JSON结构，其区别通过type字段来标识，不同类型的节点，其区别在parameters里体现。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("是否必须")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("instId")]),t._v(" "),s("td",[t._v("流程中每个节点都有唯一的id来标识")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("name")]),t._v(" "),s("td",[t._v("节点名称")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("节点类型，包括：任务（Task）、事件（Event）和网关（Gateway）")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("description")]),t._v(" "),s("td",[t._v("节点描述")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("template")]),t._v(" "),s("td",[t._v("节点模板，不同模板类型的节点代表执行不同的功能")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("positions")]),t._v(" "),s("td",[t._v("节点在流程设计器平面上的x、y坐标位置")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("connections")]),t._v(" "),s("td",[t._v("当前节点指向的下一个节点（大于等于0），最后的叶子节点为空数组")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("parameters")]),t._v(" "),s("td",[t._v("不同节点模板，其输入参数不一样，是一个Json的结构的对象。")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("errorHandler")]),t._v(" "),s("td",[t._v("错误处理器")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("loopHandler")]),t._v(" "),s("td",[t._v("循环处理器")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("timeout")]),t._v(" "),s("td",[t._v("节点运行的最大时长")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("isIgnore")]),t._v(" "),s("td",[t._v("当前节点是否忽略运行。如果设置为true，则运行时，引擎会检测到该标识并跳过该节点不执行，接着执行下一个节点")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("runtimes")]),t._v(" "),s("td",[t._v("运行时数据，它是一个runtime结构体数组。每个runtime包括运行时间、运行时的入参数据、输出结果等")]),t._v(" "),s("td",[t._v("是")])])])]),t._v(" "),s("p",[t._v("其Json结构参考如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"instId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"脚本任务执行"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Task"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"执行脚本任务"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"positions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"connections"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameters"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"代码"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"errorHandler"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"loopHandler"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"isIgnore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"runtimes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("同样的，这里节点(node)定义是静态数据，其运行时会产生节点实例这种动态数据（nodeInst），每个节点实例都会包含节点定义的数据结构，也包含运行时的数据。两者也是一对多的关系。")]),t._v(" "),s("blockquote",[s("p",[t._v("instId")])]),t._v(" "),s("p",[t._v("任务的实例ID，流程中每个节点的实例ID都是唯一的，可以采用UUID算法生成或者使用twitter的雪花算法生成，这里推荐后者。因为雪花算法生成的ID唯一且成增长趋势，可以避免ID随机导致的数据库主键插入顺序频繁排序引致的低效率问题，而且也方便后续分表时作为全局唯一的分布式主键ID。")]),t._v(" "),s("blockquote",[s("p",[t._v("name")])]),t._v(" "),s("p",[t._v("描述节点名称")]),t._v(" "),s("blockquote",[s("p",[t._v("type")])]),t._v(" "),s("p",[t._v("描述节点类型，包括：任务（Task）、事件（Event）和网关（Gateway）")]),t._v(" "),s("blockquote",[s("p",[t._v("description")])]),t._v(" "),s("p",[t._v("描述节点的功能")]),t._v(" "),s("blockquote",[s("p",[t._v("template")])]),t._v(" "),s("p",[t._v("节点的类型，包括：起始节点、节点、数据流控制节点三大类，更具体可以参考下一章内容。")]),t._v(" "),s("blockquote",[s("p",[t._v("positions")])]),t._v(" "),s("p",[t._v("描述节点在流程设计器上坐标位置，主要用于在浏览器上图形化渲染展示。")]),t._v(" "),s("blockquote",[s("p",[t._v("connections")])]),t._v(" "),s("p",[t._v("当前节点指向的下一个节点实例ID，如果数组有多个实例ID，则可能是并行节点。如果是流程的叶子节点，即最后一个节点，则该属性为空数组。")]),t._v(" "),s("blockquote",[s("p",[t._v("parameters")])]),t._v(" "),s("p",[t._v("定义当前节点的入参属性，采用字典结构，每个入参key属性对应label、type、value、default、required五个字段，例如下面的json结构。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("label")]),t._v(" "),s("p",[t._v("描述入参的名称")])]),t._v(" "),s("li",[s("p",[t._v("type")]),t._v(" "),s("p",[t._v("描述入参的类型，包括：字符串（string）、整数（integer）、浮点数（float）、布尔值（boolean）等")])]),t._v(" "),s("li",[s("p",[t._v("key")]),t._v(" "),s("p",[t._v("描述入参的唯一key值标识。注意节点中的parameters数组里的成员每个key值都是不重复的，这个主要用于定位表示字段的位置。在后面介绍的变量表达式中也会用到，用于引擎在运行时定位节点的参数位置。")])]),t._v(" "),s("li",[s("p",[t._v("value")]),t._v(" "),s("p",[t._v("描述入参的值。")])]),t._v(" "),s("li",[s("p",[t._v("default")]),t._v(" "),s("p",[t._v("描述入参的默认值。")])]),t._v(" "),s("li",[s("p",[t._v("required")]),t._v(" "),s("p",[t._v("描述入参是否必填")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"名字"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhangsan"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"无"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"年龄"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("errorHandler 错误节点")])]),t._v(" "),s("p",[t._v("其JSON结构如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"operation"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stop"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"retryCount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"retryInterval"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"exception_branch"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("其中operation字段支持的动作包括：")]),t._v(" "),s("ul",[s("li",[t._v("stop：发生错误，则直接停止往下执行")]),t._v(" "),s("li",[t._v("ignore：发生错误，忽略，继续往下执行")]),t._v(" "),s("li",[t._v("catch：发生错误，捕获并响应，执行异常分支的流程（exception_branch分支指向的节点）")]),t._v(" "),s("li",[t._v("retry：发生错误，重试retryCount次，每次之间间隔是retryInterval秒")])]),t._v(" "),s("blockquote",[s("p",[t._v("loopHandler循环处理器")])]),t._v(" "),s("p",[t._v("其JSON结构如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"loopType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"for"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"maxIteration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"stopCond"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"String"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value1"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"operation"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"equal"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value2"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("其中loopType支持for循环和do...while循环")]),t._v(" "),s("p",[t._v("两种循环模式都支持设置最大循环次数maxIteration。")]),t._v(" "),s("p",[t._v("其中do...while循环需要设置循环终止的条件，即stopCond字段。")]),t._v(" "),s("p",[t._v("终止条件的判断支持常见的字符串、数字对比方式。")]),t._v(" "),s("blockquote",[s("p",[t._v("timeout")])]),t._v(" "),s("p",[t._v("设置当前节点运行的最长时间，超过该时间，引擎会强制终止，并设置当前任务实例为超时状态。")]),t._v(" "),s("blockquote",[s("p",[t._v("isIgnore")])]),t._v(" "),s("p",[t._v("设置当前节点在运行时是否要忽略不执行，直接运行下一个节点。这个功能一般用在调试的时候用。")]),t._v(" "),s("blockquote",[s("p",[t._v("runtimes")])]),t._v(" "),s("p",[t._v("节点的运行时数据，如果节点被多次运行，则会生成多个runtime结构体数据，详细见下面介绍。")]),t._v(" "),s("h2",{attrs:{id:"runtime定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#runtime定义"}},[t._v("#")]),t._v(" runtime定义")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("index")]),t._v(" "),s("td",[t._v("索引位置。由于流程中一个节点可能被执行多次（例如审批打回或循环），这里通过index递增来区分不同task实例，它是依次递增的。")])]),t._v(" "),s("tr",[s("td",[t._v("startAt")]),t._v(" "),s("td",[t._v("任务实例运行开始时间")])]),t._v(" "),s("tr",[s("td",[t._v("endAt")]),t._v(" "),s("td",[t._v("任务实例运行结束时间")])]),t._v(" "),s("tr",[s("td",[t._v("status")]),t._v(" "),s("td",[t._v("任务实例的状态")])]),t._v(" "),s("tr",[s("td",[t._v("error")]),t._v(" "),s("td",[t._v("任务实例运行时发生异常时的错误信息")])]),t._v(" "),s("tr",[s("td",[t._v("input")]),t._v(" "),s("td",[t._v("运行时的入参数据，跟task结构体的parameters一一对应，是key、value的字典结构。前面node节点定义中的parameters是"),s("strong",[t._v("定义时的静态数据")]),t._v("，可能是常量、也可能是变量表达式（运行时解析）。而这里的input则是节点"),s("strong",[t._v("运行时的动态数据")]),t._v("，可能是常量、也可能是变量表达式运行时解析后的数据。两种是一个静态、一个动态数据的区别。")])]),t._v(" "),s("tr",[s("td",[t._v("output")]),t._v(" "),s("td",[t._v("任务实例运行时的输出结果。其数据类型可以是字符串、数字、布尔值、数组、或复杂的对象结构。")])])])]),t._v(" "),s("p",[t._v("其Json结构参考如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n    "index": 0,\n    "startAt": 1700063265000,\n    "endAt": 1700063307000,\n    "status": "done",\n    "error": "",\n    "input": {\n        "code": "xxx"\n    },\n    "output": "ok"\n}\n')])])]),s("blockquote",[s("p",[t._v("index")])]),t._v(" "),s("p",[t._v("描述任务实例运行的顺序，如果节点只运行一次，则index为0，即第一个被运行的任务实例。如果节点被多次运行，例如在审批打回或者循环的场景，则index依次递增。也就是说，runtime这里存储的是任务的运行时数据，即任务实例，这里可以是多个。")]),t._v(" "),s("blockquote",[s("p",[t._v("startAt")])]),t._v(" "),s("p",[t._v("任务实例开始运行的时间，格式采用UNIX毫秒时间戳。")]),t._v(" "),s("blockquote",[s("p",[t._v("endAt")])]),t._v(" "),s("p",[t._v("任务实例运行结束的时间，格式采用UNIX毫秒时间戳。跟startAt相减可以精确计算出任务实例毫秒级的运行耗时。")]),t._v(" "),s("blockquote",[s("p",[t._v("status")])]),t._v(" "),s("p",[t._v("任务实例的状态，详细见下一章任务实例生命周期的介绍。")]),t._v(" "),s("img",{attrs:{src:a(285),alt:"image-20240304093637277"}}),t._v(" "),s("blockquote",[s("p",[t._v("input")])]),t._v(" "),s("p",[t._v("任务实例运行时的入参数据，这里跟task结构体的parameters一一对应。")]),t._v(" "),s("p",[t._v("例如task的parameters定义如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"名字"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhangsan"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"无"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"年龄"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("那么任务实例在运行时的input结构如下，采用key、value的字典结构。")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhangsan"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("之所以还要记录任务实例运行时的入参数据，主要是因为在定义task任务的parameters时，它的参数value可以是变量表达式的形式，即在运行时根据上下文数据动态解析，并不是都是固定常量。")]),t._v(" "),s("blockquote",[s("p",[t._v("output")])]),t._v(" "),s("p",[t._v("任务实例运行的输出，其数据类型可以是字符串、数字、布尔值、数组、或复杂的对象结构。")])])}),[],!1,null,null,null);s.default=n.exports}}]);