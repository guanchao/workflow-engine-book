(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{552:function(t,s,a){t.exports=a.p+"assets/img/4 数据模式的可见性类别.8eeab327.png"},553:function(t,s,a){t.exports=a.p+"assets/img/4 数据模式-数据交互.47251633.png"},658:function(t,s,a){"use strict";a.r(s);var n=a(14),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("数据管理机制就是流程管理里面的信息流，它描述了如何在业务流程执行过程定义和管理数据。它们可分为四种：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("数据可见性：与流程中数据元素的范围和可见性有关的模式。")])]),t._v(" "),s("li",[s("p",[t._v("数据交互（流程内）：这种模式侧重于流程中任务之间的数据通信方式。")])]),t._v(" "),s("li",[s("p",[t._v("数据传输（流程外）：这种模式考虑了数据元素在流程之间实际传输的方式，以及流程与外部环境之间的传输机制。")])]),t._v(" "),s("li",[s("p",[t._v("基于数据的路由：描述数据元素影响流程其他方面运行的方式的模式，特别是控制流视角。")])])]),t._v(" "),s("h2",{attrs:{id:"数据可见性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据可见性"}},[t._v("#")]),t._v(" 数据可见性")]),t._v(" "),s("p",[t._v("数据可见性模式定义了数据元素与其可见区域的范围。数据元素通常是在流程的上下文中定义的，这种绑定通常定义了数据元素对其他流程可见并能被其他流程使用的范围。这一组有八种不同的模式，它们描述了不同程度的数据范围，具体如下：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("环境数据（Environment Data）：")]),t._v(" "),s("p",[t._v("其数据元素也叫环境变量。对应于在流程上下文之外定义但在执行过程中可在流程内访问的数据元素。环境数据元素有可能被不同流程的不同流程实例下的不同实例访问。也就是说所有流程产生的流程实例都可以访问数据元素。它的生命周期与用户相同。下图通过数据元素evar展示了环境数据模式，流程X和流程Y的所有流程实例里的任务实例都可以访问evar。")])]),t._v(" "),s("li",[s("p",[t._v("流程数据（Process Data）：")]),t._v(" "),s("p",[t._v("其数据元素也叫流程变量。对应的数据元素在给定流程实例的所有任务中都可访问。下图通过数据元素 pvar 展示了流程数据，流程实例B里的两个任务实例_1和任务实例_2都可以访问pvar。")])]),t._v(" "),s("li",[s("p",[t._v("任务数据（Task Data）：")]),t._v(" "),s("p",[t._v("其数据元素也叫局部变量。相当于在特定任务上下文中定义的数据元素。它通常只能在给定的任务实例中访问，生命周期与绑定它的任务实例相同。图 2.8 中与任务 A 相关联的变量 tvar 就说明了任务数据模式，该变量只能在该任务上下文中访问。例如脚本任务重的变量只在当前任务实例生效。")])])]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:a(552),alt:"image-20231220202443960"}}),t._v(" "),s("h2",{attrs:{id:"数据交互-流程内"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据交互-流程内"}},[t._v("#")]),t._v(" 数据交互（流程内）")]),t._v(" "),s("p",[t._v("流程内的任务之间可以通过以下两种方式实现数据通信：")]),t._v(" "),s("ul",[s("li",[t._v("流程变量：流程实例可以通过前面介绍的pvar变量进行读写来实现通信。")]),t._v(" "),s("li",[t._v("基于数据的路由：另一种更灵活的方式是通过下面第四节介绍的变量表达式方式实现对流程实例中任意一个任务输入、输出数据的引用。")])]),t._v(" "),s("h2",{attrs:{id:"数据传输-流程外"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据传输-流程外"}},[t._v("#")]),t._v(" 数据传输（流程外）")]),t._v(" "),s("h3",{attrs:{id:"流程与外部环境之间的数据传输"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程与外部环境之间的数据传输"}},[t._v("#")]),t._v(" 流程与外部环境之间的数据传输")]),t._v(" "),s("p",[t._v("在工作流中，流程与外部环境的数据传输方式主要有以下几种：")]),t._v(" "),s("ul",[s("li",[t._v("数据库传输：这是最常见的数据传输方式。流程和外部环境通过共享数据库来传输数据。流程可以查询数据库中的数据，也可以将处理结果写入数据库。")]),t._v(" "),s("li",[t._v("文件传输：流程和外部环境可以通过共享文件系统来传输数据。流程可以读取文件中的数据，也可以将处理结果写入文件。")]),t._v(" "),s("li",[t._v("消息队列传输：流程和外部环境可以通过消息队列来传输数据。流程可以向消息队列发送消息，也可以从消息队列接收消息。")]),t._v(" "),s("li",[t._v("API调用：流程可以通过调用外部环境提供的API接口来获取数据或者传输数据。")]),t._v(" "),s("li",[t._v("邮件传输：流程可以通过发送邮件的方式，将数据传输给外部环境。")]),t._v(" "),s("li",[t._v("Web服务：流程可以通过调用外部环境提供的Web服务来获取数据或者传输数据。")])]),t._v(" "),s("p",[t._v("以上就是流程与外部环境的主要数据传输方式，实际应用中，可能会根据具体需求，选择一种或者多种方式进行数据传输。")]),t._v(" "),s("h3",{attrs:{id:"流程与流程之间的数据传输"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程与流程之间的数据传输"}},[t._v("#")]),t._v(" 流程与流程之间的数据传输")]),t._v(" "),s("p",[t._v("流程与流程之间传输数据也跟上面类似，主要通过以下方式：")]),t._v(" "),s("ul",[s("li",[t._v("数据库：流程之间可以通过共享数据库来传输数据。一个流程在数据库中写入数据，另一个流程从数据库中读取数据。")]),t._v(" "),s("li",[t._v("消息队列：流程之间也可以通过消息队列来传输数据。一个流程发送消息到队列，另一个流程从队列中接收消息。")]),t._v(" "),s("li",[t._v("API调用：流程之间可以通过API调用来传输数据。一个流程调用另一个流程的API，将数据作为参数传入。")]),t._v(" "),s("li",[t._v("文件交换：流程之间可以通过文件交换来传输数据。一个流程生成一个文件，另一个流程读取这个文件。")]),t._v(" "),s("li",[t._v("环境变量：在同一个系统中，流程之间可以通过环境变量来传输数据，一个流程写入环境变量，另一个流程读取环境变量。")]),t._v(" "),s("li",[t._v("Web服务：流程之间可以通过服务调用来传输数据。一个流程提供一个服务，然后其他流程通过调用这个服务来获取数据。")]),t._v(" "),s("li",[t._v("子流程调用：通过子流程任务调用传输数据，父流程可以给子流程传递参数，子流程可以把执行结果输出返回给父流程（注意这里必须是同步方式执行子流程）")])]),t._v(" "),s("p",[t._v("下图是流程与外部环境、流程与流程之间以及流程内任务之间的数据传输方式：")]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:a(553),alt:"image-20231221085856343"}}),t._v(" "),s("h2",{attrs:{id:"基于数据的路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于数据的路由"}},[t._v("#")]),t._v(" 基于数据的路由")]),t._v(" "),s("p",[t._v("前面我们用JSON的方式定义了流程模型，流程中每个任务的数据结构如下，例如Crontab触发器：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"instId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"crontab触发器"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"crontab周期任务"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"crontab"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"positions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"connections"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameters"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expr"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"expr"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*/1 * * * *"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"errorHandler"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"loopHandler"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"isIgnore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"runtimes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameters"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expr"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*/1 * * * *"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"output"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"startAt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2023-12-01 21:03:11"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endAt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2023-12-01 21:03:11"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"done"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("每个任务的数据分为定义数据和运行时数据。")]),t._v(" "),s("ul",[s("li",[t._v("定义数据：就是最外层的parameters字段，这里定义了任务包含的入参字段。")]),t._v(" "),s("li",[t._v("运行时数据：存储在runtimes字段，该字段是一个数组，因为每个任务可能被多次运行，即创建多个任务实例，所以运行时数据会产生多条。每个运行时数据会把运行时的parameters以及输出结果、发生时间给记录下来，运行时的parameters和定义时的parameters可能不一样，因为定义的入参parameters可能是一个变量表达式而非常量，只有在运行时才知道具体的数值。")])]),t._v(" "),s("p",[t._v("这里，我们可以看到每个任务实例都有一个instId来标识区分，所以流程中我们可以通过如下的变量表达式来定位引用任务实例的定义数据和运行时数据。")]),t._v(" "),s("blockquote",[s("p",[t._v("定义数据引用")])]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用某个入参定义的label")]),t._v("\n{{instId.parameters.key.label}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用某个入参定义的type")]),t._v("\n{{instId.parameters.key.type}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用某个入参定义的value")]),t._v("\n{{instId.parameters.key.value}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用某个入参定义的default")]),t._v("\n{{instId.parameters.key.default}}\n")])])]),s("blockquote",[s("p",[t._v("运行时数据引用")])]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用某个入参第一次运行时的value值")]),t._v("\n{{instId.runtimes.0.parameters.key}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用某个入参第二次运行时的value值")]),t._v("\n{{instId.runtimes.1.parameters.key}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用任务实例第一次运行时的输出结果")]),t._v("\n{{instId.runtimes.0.output}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用任务实例第一次运行时的开始时间")]),t._v("\n{{instId.runtimes.0.startAt}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用任务实例第一次运行时的结束时间")]),t._v("\n{{instId.runtimes.0.endAt}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用任务实例第一次运行时的错误信息")]),t._v("\n{{instId.runtimes.0.error}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用任务实例第一次运行时的装填")]),t._v("\n{{instId.runtimes.0.status}}\n")])])]),s("p",[t._v("前面两个是任务数据的引用，如果想引用数据可见性中提到的环境数据和全局数据，则可以通过如下的语法实现：")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 环境数据引用")]),t._v("\n{{env.var}}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局数据引用")]),t._v("\n{{process.var}}   \n")])])]),s("p",[t._v("上面只是变量表达式语法的简单使用，在实际运行环境里，任务实例的输出结果可能更复杂，可能是一个复杂的Json嵌套结构，例如Output输出的是一个嵌套的Json结构：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Tom"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Anderson"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"children"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sara"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alex"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Jack"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fav.movie"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Deer Hunter"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"friends"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Dale"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Murphy"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nets"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ig"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tw"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Roger"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Craig"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("68")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nets"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tw"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Jane"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Murphy"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nets"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ig"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tw"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"vals"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("下面样一些特性，我会议上面这个Json输出结果为例子。")]),t._v(" "),s("h3",{attrs:{id:"基础语法支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础语法支持"}},[t._v("#")]),t._v(" 基础语法支持")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.name.last}}          >> "Anderson"\n{{instId.runtimes.0.output.age}}                >> 37\n{{instId.runtimes.0.output.children}}           >> ["Sara","Alex","Jack"]\n{{instId.runtimes.0.output.children.#}}         >> 3\n{{instId.runtimes.0.output.children.0}}         >> "Sara"\n{{instId.runtimes.0.output.children.1}}         >> "Alex"\n{{instId.runtimes.0.output.friends.#.first}}    >> ["Dale","Roger","Jane"]\n{{instId.runtimes.0.output.friends.1.last}}     >> "Craig"\n')])])]),s("h3",{attrs:{id:"通配符语法支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通配符语法支持"}},[t._v("#")]),t._v(" 通配符语法支持")]),t._v(" "),s("p",[t._v("表达式里面可以通过"),s("code",[t._v("*")]),t._v("通配符匹配任何字符串，或者通过"),s("code",[t._v("?")]),t._v("通配符匹配一个字符串。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.child*.2}}          >> "Jack"\n{{instId.runtimes.0.output.c?ildren.0}}        >> "Sara"\n')])])]),s("h3",{attrs:{id:"转义字符语法支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转义字符语法支持"}},[t._v("#")]),t._v(" 转义字符语法支持")]),t._v(" "),s("p",[t._v("像一些特殊字符，例如："),s("code",[t._v(".")]),t._v("、"),s("code",[t._v("*")]),t._v("、"),s("code",[t._v("?")]),t._v("，可以用"),s("code",[t._v("\\")]),t._v("来转义。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.fav\\.movie}}          >> "Deer Hunter"\n')])])]),s("h3",{attrs:{id:"数组语法支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数组语法支持"}},[t._v("#")]),t._v(" 数组语法支持")]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("#")]),t._v("字符可以深入挖掘JSON数组，"),s("code",[t._v("#")]),t._v("本身表示数组长度，也可以通过"),s("code",[t._v("#")]),t._v("获取对象数组中的某个字段列表。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{{instId.runtimes.0.output.friends.#}}          >> 3\n{{instId.runtimes.0.output.friends.#.age}}      >> [44,68,47]\n")])])]),s("h3",{attrs:{id:"查询语法支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询语法支持"}},[t._v("#")]),t._v(" 查询语法支持")]),t._v(" "),s("p",[t._v("可以使用 "),s("code",[t._v("#(...)")]),t._v("查询数组的第一个匹配项，或使用 "),s("code",[t._v("#(...)#")]),t._v("查找所有匹配项。查询支持 "),s("code",[t._v("==、!=、<、<=、>、>=")]),t._v("比较运算符，以及简单模式匹配 "),s("code",[t._v("%")]),t._v("（类似）和"),s("code",[t._v("!%")]),t._v("（不类似）运算符。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.friends.#(last=="Murphy").first}}    >> "Dale"\n{{instId.runtimes.0.output.friends.#(last=="Murphy")#.first}}   >> ["Dale","Jane"]\n{{instId.runtimes.0.output.friends.#(age>45)#.last}}            >> ["Craig","Murphy"]\n{{instId.runtimes.0.output.friends.#(first%"D*").last}}         >> "Murphy"\n{{instId.runtimes.0.output.friends.#(first!%"D*").last}}        >> "Craig"\n')])])]),s("p",[t._v("如果要查询非对象数组，例如：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.children.#(!%"*a*")}}    >> "Alex"\n{{instId.runtimes.0.output.children.#(%"*a*")#}}    >> ["Sara","Jack"]\n')])])]),s("p",[t._v("甚至可以支持一些嵌套查询的语法：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.friends.#(nets.#(=="fb"))#.first}}    >> ["Dale","Roger"]\n')])])]),s("p",[s("code",[t._v("~")]),t._v("（波形符）运算符会在比较之前将值转换为布尔值。")]),t._v(" "),s("p",[t._v("例如，要查询所有 true 、 false 和null值：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{{instId.runtimes.0.output.vals.#(b==~true)#.a}}     >> [2,6,7,8]\n{{instId.runtimes.0.output.vals.#(b==~false)#.a}}    >> [3,4,5,9,10,11]\n{{instId.runtimes.0.output.vals.#(b==~null)#.a}}     >> [10,11]\n")])])]),s("h3",{attrs:{id:"修饰符语法支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修饰符语法支持"}},[t._v("#")]),t._v(" 修饰符语法支持")]),t._v(" "),s("p",[t._v("修饰符类似于把一些常用的操作，例如数组反转、移除空格等操作包装成一个函数调用的方式使用，例如：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@reverse")]),t._v(": 反转数组成员")]),t._v(" "),s("li",[s("code",[t._v("@trim")]),t._v(": 删除json中的所有空格")]),t._v(" "),s("li",[s("code",[t._v("@keys")]),t._v(": 返回对象的key列表")]),t._v(" "),s("li",[s("code",[t._v("@values")]),t._v(": 返回对象的value列表")]),t._v(" "),s("li",[s("code",[t._v("@tostr")]),t._v(": 将json转换成字符串")]),t._v(" "),s("li",[s("code",[t._v("@fromstr")]),t._v(": 将字符串转换成json")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.children|@reverse}}           >> ["Jack","Alex","Sara"]\n{{instId.runtimes.0.output.children|@reverse|0}}         >> "Jack"\n')])])]),s("h3",{attrs:{id:"自定义修饰符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义修饰符"}},[t._v("#")]),t._v(" 自定义修饰符")]),t._v(" "),s("p",[t._v("如果一些内置的修饰符不满足需求，引擎甚至可以支持用户自定义修饰符，提高引擎的变量表达式的语法拓展性。")]),t._v(" "),s("p",[t._v("例如，实现字符串大小写转换的修饰符。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddModifier")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"case"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" arg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"upper"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" strings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ToUpper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" arg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lower"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" strings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ToLower")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" json\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("p",[t._v("使用：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{{instId.runtimes.0.output.children.@case:upper}}                  >> ["SARA","ALEX","JACK"]\n{{instId.runtimes.0.output.children.@case:lower.@reverse}}         >> ["jack","alex","sara"]\n')])])]),s("p",[t._v("前面介绍的所有语法，都是实现了对数据元素的读操作，并不涉及修改，如果想要实现对数据元素的写操作，可以结合前面设计的【变量读写】任务类型来实现对数据元素读写操作。")])])}),[],!1,null,null,null);s.default=r.exports}}]);